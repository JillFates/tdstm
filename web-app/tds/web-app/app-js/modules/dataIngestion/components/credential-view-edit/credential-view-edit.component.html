<div class="modal-content api-action-view-edit-component">
	<div class="modal-header">
		<button (click)="cancelCloseDialog()" type="button" class="close" aria-label="Close">
			<span aria-hidden="true">Ã—</span>
		</button>
		<h4 class="modal-title">{{modalTitle}}</h4>
	</div>
	<div class="modal-body">
		<form name="apiActionForm" role="form" data-toggle="validator" #apiActionForm='ngForm' class="form-horizontal left-alignment">
			<div class="box-body">
				<div class="row">
					<div class="col-md-7">
						<div class="form-group">
							<label for="apiActionName" class="col-sm-3 control-label">Name:
								<span style="color: red;" *ngIf="modalType !== actionTypes.VIEW">*</span>
							</label>
							<div class="col-sm-8" *ngIf="modalType !== actionTypes.VIEW">
								<input type="text" id="apiActionName" name="apiActionName" class="form-control" [(ngModel)]="credentialModel.name"
									   required [ngClass]="{'has-error': (!apiActionForm.form.valid && apiActionForm.touched) && credentialModel.name.length <= 0}" />
							</div>
							<div class="col-sm-8" *ngIf="modalType === actionTypes.VIEW">
								<label class="control-label label-detail">{{credentialModel.name}}</label>
							</div>
						</div>
						<div class="form-group">
							<label for="apiActionProvider" class="col-sm-3 control-label">Provider:
								<span style="color: red;" *ngIf="modalType !== actionTypes.VIEW">*</span>
							</label>
							<div class="col-sm-8" *ngIf="modalType !== actionTypes.VIEW">
								<kendo-dropdownlist #apiActionProvider
													id="apiActionProvider" name="apiActionProvider" class="form-control"
													(valueChange)="onProviderValueChange($event, false)"
													[data]="providerList"
													[textField]="'name'"
													[valueField]="'id'"
													[(ngModel)]="credentialModel.provider" required class="form-control" [ngClass]="{'has-error':  (!apiActionForm.form.valid && apiActionForm.touched) && credentialModel.provider?.id == 0}"></kendo-dropdownlist>
							</div>
							<div class="col-sm-8" *ngIf="modalType === actionTypes.VIEW">
								<label class="control-label label-detail">{{credentialModel.provider.name}}</label>
							</div>
						</div>
						<div class="form-group">
							<label for="apiActionDescription" class="col-sm-3 control-label">Description:</label>
							<div class="col-sm-8" *ngIf="modalType !== actionTypes.VIEW">
								<textarea type="text" id="apiActionDescription" name="apiActionDescription" class="form-control" [(ngModel)]="credentialModel.description"></textarea>
							</div>
							<div class="col-sm-8" *ngIf="modalType === actionTypes.VIEW">
								<label class="control-label label-detail">{{credentialModel.description}}</label>
							</div>
						</div>
						<div class="form-group">
							<label for="apiActionAgent" class="col-sm-3 control-label">Agent:
								<span style="color: red;" *ngIf="modalType !== actionTypes.VIEW">*</span>
							</label>
							<div class="col-sm-8" *ngIf="modalType !== actionTypes.VIEW">
								<kendo-dropdownlist #apiActionAgent
													id="apiActionAgent" name="apiActionAgent" class="form-control"
													[data]="agentList"
													(valueChange)="onAgentValueChange($event)"
													[textField]="'name'"
													[valueField]="'id'"
													[(ngModel)]="credentialModel.agentClass"
													required class="form-control" [ngClass]="{'has-error':  (!apiActionForm.form.valid && apiActionForm.touched) && credentialModel.agentClass?.id == 0}"></kendo-dropdownlist>
							</div>
							<div class="col-sm-8" *ngIf="modalType === actionTypes.VIEW">
								<label class="control-label label-detail">{{credentialModel.agentClass.name}}</label>
							</div>
						</div>
						<div class="form-group">
							<label for="apiActionMethod" class="col-sm-3 control-label">Method:
								<span style="color: red;" *ngIf="modalType !== actionTypes.VIEW">*</span>
							</label>
							<div class="col-sm-8" *ngIf="modalType !== actionTypes.VIEW">
								<kendo-dropdownlist #apiActionAgentMethod
													id="apiActionMethod" name="apiActionMethod" class="form-control"
													[data]="agentMethodList"
													[textField]="'name'"
													[valueField]="'id'"
													(open)="onOpenAgentMethod()"
													[(ngModel)]="credentialModel.agentMethod"
													[disabled]="credentialModel.agentClass.id === 0"
													required [ngClass]="{'has-error':  (!apiActionForm.form.valid && apiActionForm.touched) && credentialModel.agentMethod?.id == 0}">
									<ng-template kendoDropDownListItemTemplate let-dataItem>
										<span style="margin-right: 3px; min-width: 115px; font-weight: bold;">{{ dataItem?.name }}</span> <span style="margin-left: 3px;">{{ dataItem?.description }}</span>
									</ng-template>
								</kendo-dropdownlist>
							</div>
							<div class="col-sm-8" *ngIf="modalType === actionTypes.VIEW">
								<label class="control-label label-detail">{{credentialModel.agentMethod.name}}</label>
							</div>
						</div>
						<div class="form-group">
							<label for="apiActionCredentials" class="col-sm-3 control-label">Credentials:</label>
							<div class="col-sm-8" *ngIf="modalType !== actionTypes.VIEW">
								<kendo-dropdownlist #apiActionCredential
													id="apiActionCredentials"
													name="apiActionCredentials" class="form-control"
													[data]="agentCredentialList"
													[textField]="'name'"
													[valueField]="'id'"
													[disabled]="credentialModel.provider.id === 0"
													[(ngModel)]="credentialModel.credential"></kendo-dropdownlist>
							</div>
							<div class="col-sm-8" *ngIf="modalType === actionTypes.VIEW">
								<label class="control-label label-detail">{{credentialModel.credential?.name}}</label>
							</div>
						</div>
						<div class="form-group">
							<label for="apiActionEndpointURL" class="col-sm-3 control-label">Endpoint URL:</label>
							<div class="col-sm-8" *ngIf="modalType !== actionTypes.VIEW">
								<input type="text" id="apiActionEndpointURL" name="apiActionEndpointURL" class="form-control" [(ngModel)]="credentialModel.endpointUrl" />
							</div>
							<div class="col-sm-8" *ngIf="modalType === actionTypes.VIEW">
								<label class="control-label label-detail">{{credentialModel.endpointUrl}}</label>
							</div>
						</div>
						<div class="form-group">
							<label for="apiActionEndpointPath" class="col-sm-3 control-label">Endpoint Path:</label>
							<div class="col-sm-8" *ngIf="modalType !== actionTypes.VIEW">
								<input type="text" id="apiActionEndpointPath" name="apiActionEndpointPath" class="form-control" [(ngModel)]="credentialModel.endpointPath" />
							</div>
							<div class="col-sm-8" *ngIf="modalType === actionTypes.VIEW">
								<label class="control-label label-detail">{{credentialModel.endpointPath}}</label>
							</div>
						</div>
					</div>
					<div class="col-md-5">

					</div>
				</div>
			</div>
		</form>
	</div>
	<div class="modal-footer form-group-center">
		<button type="button" *ngIf="modalType === actionTypes.EDIT || modalType === actionTypes.CREATE" (click)="onSaveApiAction()"
		 class="btn btn-primary pull-left" [disabled]="!validInfoForm || invalidScriptSyntax">
			<span class="fa fa-fw fa-floppy-o"></span> Save</button>
		<button type="button" *ngIf="modalType !== actionTypes.VIEW" (click)="onCheckAllSyntax()" class="btn btn-primary pull-left">
			<span class="fa fa-fw fa-thumbs-o-up"></span> Check Syntax</button>
		<button type="button" *ngIf="modalType === actionTypes.VIEW" (click)="changeToEditApiAction()" class="btn btn-primary pull-left">
			<span class="glyphicon glyphicon-pencil"></span> Edit</button>
		<button type="button" *ngIf="modalType !== actionTypes.CREATE" (click)="onDeleteApiAction()" class="btn btn-danger">
			<span class="fa fa-fw fa-trash"></span> Delete</button>
		<button (click)="cancelCloseDialog()" type="button" class="btn btn-default pull-right">
			<span class="glyphicon glyphicon-ban-circle"></span>
			<span *ngIf="modalType === actionTypes.VIEW">
				{{'GLOBAL.CLOSE' | translate }}
			</span>
			<span *ngIf="modalType === actionTypes.EDIT || modalType === actionTypes.CREATE">
				{{'GLOBAL.CANCEL' | translate }}
			</span>
		</button>
	</div>
</div>