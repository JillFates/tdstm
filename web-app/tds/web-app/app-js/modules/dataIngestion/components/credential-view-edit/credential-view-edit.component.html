<div class="modal-content api-action-view-edit-component">
	<div class="modal-header">
		<button (click)="cancelCloseDialog()" type="button" class="close" aria-label="Close">
			<span aria-hidden="true">Ã—</span>
		</button>
		<h4 class="modal-title">{{modalTitle}}</h4>
	</div>
	<div class="modal-body">
		<form name="credentialForm" role="form" data-toggle="validator" #credentialForm='ngForm' class="form-horizontal left-alignment">
			<div class="box-body">
				<div class="row">
					<div class="col-md-6">
						<div class="form-group">
							<label for="credentialName" class="col-sm-3 control-label">Name:
								<span style="color: red;" *ngIf="modalType !== actionTypes.VIEW">*</span>
							</label>
							<div class="col-sm-8" *ngIf="modalType !== actionTypes.VIEW">
								<input type="text" id="credentialName" name="credentialName" class="form-control" [(ngModel)]="credentialModel.name"
									   required [ngClass]="{'has-error': (!credentialForm.form.valid && credentialForm.touched) && credentialModel.name.length <= 0}" />
							</div>
							<div class="col-sm-8" *ngIf="modalType === actionTypes.VIEW">
								<label class="control-label label-detail">{{credentialModel.name}}</label>
							</div>
						</div>
						<div class="form-group">
							<label for="credentialDescription" class="col-sm-3 control-label">Description:</label>
							<div class="col-sm-8" *ngIf="modalType !== actionTypes.VIEW">
								<textarea type="text" id="credentialDescription" name="credentialDescription" class="form-control" [(ngModel)]="credentialModel.description"></textarea>
							</div>
							<div class="col-sm-8" *ngIf="modalType === actionTypes.VIEW">
								<label class="control-label label-detail">{{credentialModel.description}}</label>
							</div>
						</div>
						<div class="form-group">
							<label for="credentialProvider" class="col-sm-3 control-label">Provider:
								<span style="color: red;" *ngIf="modalType !== actionTypes.VIEW">*</span>
							</label>
							<div class="col-sm-8" *ngIf="modalType !== actionTypes.VIEW">
								<kendo-dropdownlist #credentialProvider
													id="credentialProvider" name="credentialProvider" class="form-control"
													[data]="providerList"
													[textField]="'name'"
													[valueField]="'id'"
													[(ngModel)]="credentialModel.provider" required class="form-control" [ngClass]="{'has-error':  (!credentialForm.form.valid && credentialForm.touched) && credentialModel.provider?.id == 0}"></kendo-dropdownlist>
							</div>
							<div class="col-sm-8" *ngIf="modalType === actionTypes.VIEW">
								<label class="control-label label-detail">{{credentialModel.provider.name}}</label>
							</div>
						</div>
						<div class="form-group">
							<label for="credentialStatus" class="col-sm-3 control-label">Status:</label>
							<div class="col-sm-8" *ngIf="modalType !== actionTypes.VIEW">
								<kendo-dropdownlist #credentialAgent
													id="credentialStatus" name="credentialStatus" class="form-control"
													[data]="statusList"
													[(ngModel)]="credentialModel.status"
													class="form-control"></kendo-dropdownlist>
							</div>
							<div class="col-sm-8" *ngIf="modalType === actionTypes.VIEW">
								<label class="control-label label-detail">{{credentialModel.status}}</label>
							</div>
						</div>
						<div class="form-group">
							<label for="credentialType" class="col-sm-3 control-label">Credential Type:</label>
							<div class="col-sm-8" *ngIf="modalType !== actionTypes.VIEW">
								<kendo-dropdownlist #credentialType
													id="credentialType"
													name="credentialType" class="form-control"
													[data]="agentCredentialList"
													[textField]="'name'"
													[valueField]="'id'"
													[(ngModel)]="credentialModel.credential"></kendo-dropdownlist>
							</div>
							<div class="col-sm-8" *ngIf="modalType === actionTypes.VIEW">
								<label class="control-label label-detail">{{credentialModel.credential?.name}}</label>
							</div>
						</div>
					</div>
					<div class="col-md-6">
						<div class="form-group">
							<label for="credentialAuthMethod" class="col-sm-3 control-label">Auth. Method:</label>
							<div class="col-sm-8" *ngIf="modalType !== actionTypes.VIEW">
								<kendo-dropdownlist #credentialAgent
													id="credentialAuthMethod" name="credentialAuthMethod" class="form-control"
													[data]="authMethodList"
													[(ngModel)]="credentialModel.authMethod"
													class="form-control"></kendo-dropdownlist>
							</div>
							<div class="col-sm-8" *ngIf="modalType === actionTypes.VIEW">
								<label class="control-label label-detail">{{credentialModel.authMethod}}</label>
							</div>
						</div>
						<!-- Authentication Method Fields -->
						<div class="form-group">
							<label for="authUsername" class="col-sm-3 control-label">Username:
								<span style="color: red;" *ngIf="modalType !== actionTypes.VIEW">*</span>
							</label>
							<div class="col-sm-8" *ngIf="modalType !== actionTypes.VIEW">
								<input type="text" id="authUsername" name="authUsername" class="form-control" [(ngModel)]="credentialModel.username"
									   required [ngClass]="{'has-error': (!credentialForm.form.valid && credentialForm.touched) && credentialModel.username.length <= 0}" />
							</div>
							<div class="col-sm-8" *ngIf="modalType === actionTypes.VIEW">
								<label class="control-label label-detail">{{credentialModel.username}}</label>
							</div>
						</div>
						<div class="form-group" *ngIf="modalType !== actionTypes.VIEW">
							<label for="authPassword" class="col-sm-3 control-label">Password:
								<span style="color: red;">*</span>
							</label>
							<div class="col-sm-8">
								<input type="password" id="authPassword" name="authPassword" class="form-control" [(ngModel)]="credentialModel.password"
									   required [ngClass]="{'has-error': (!credentialForm.form.valid && credentialForm.touched) && credentialModel.password.length <= 0}" />
							</div>
						</div>
						<div class="form-group" *ngIf="modalType !== actionTypes.VIEW">
							<label for="authTestUrl" class="col-sm-3 control-label">Auth. Test URL:
								<span style="color: red;">*</span>
							</label>
							<div class="col-sm-8">
								<input type="password" id="authTestUrl" name="authTestUrl" class="form-control" [(ngModel)]="credentialModel.authenticationTestURL"
									   required [ngClass]="{'has-error': (!credentialForm.form.valid && credentialForm.touched) && credentialModel.authenticationTestURL.length <= 0}" />
							</div>
						</div>
						<div *ngIf="credentialModel.authMethod === authMethods[1]">
							<div class="form-group" *ngIf="modalType !== actionTypes.VIEW">
								<label for="httpMethod" class="col-sm-3 control-label">HTTP Method:
									<span style="color: red;">*</span>
								</label>
								<div class="col-sm-8">
									<input type="password" id="httpMethod" name="httpMethod" class="form-control" [(ngModel)]="credentialModel.cookieSessionMethod.httpMethod"
										   required [ngClass]="{'has-error': (!credentialForm.form.valid && credentialForm.touched) && credentialModel.cookieSessionMethod.httpMethod.length <= 0}" />
								</div>
							</div>
							<div class="form-group" *ngIf="modalType !== actionTypes.VIEW">
								<label for="cookieName" class="col-sm-3 control-label">Cookie Name:
									<span style="color: red;">*</span>
								</label>
								<div class="col-sm-8">
									<input type="password" id="cookieName" name="cookieName" class="form-control" [(ngModel)]="credentialModel.cookieSessionMethod.cookieName"
										   required [ngClass]="{'has-error': (!credentialForm.form.valid && credentialForm.touched) && credentialModel.cookieSessionMethod.cookieName.length <= 0}" />
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</form>
	</div>
	<div class="modal-footer form-group-center">
		<button type="button" *ngIf="modalType === actionTypes.EDIT || modalType === actionTypes.CREATE" (click)="onSaveCredential()"
		 class="btn btn-primary pull-left" [disabled]="!credentialForm.form.valid">
			<span class="fa fa-fw fa-floppy-o"></span> Save</button>
		<button type="button" *ngIf="modalType === actionTypes.VIEW" (click)="changeToEditCredential()" class="btn btn-primary pull-left">
			<span class="glyphicon glyphicon-pencil"></span> Edit</button>
		<button type="button" *ngIf="modalType !== actionTypes.CREATE" (click)="onDeleteCredential()" class="btn btn-danger">
			<span class="fa fa-fw fa-trash"></span> Delete</button>
		<button (click)="cancelCloseDialog()" type="button" class="btn btn-default pull-right">
			<span class="glyphicon glyphicon-ban-circle"></span>
			<span *ngIf="modalType === actionTypes.VIEW">
				{{'GLOBAL.CLOSE' | translate }}
			</span>
			<span *ngIf="modalType === actionTypes.EDIT || modalType === actionTypes.CREATE">
				{{'GLOBAL.CANCEL' | translate }}
			</span>
		</button>
	</div>
</div>