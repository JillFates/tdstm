<div tds-autofocus tds-handle-escape (escPressed)="cancelCloseDialog()" class="modal-content notice-edit-content">
    <div class="modal-header">
        <button (click)="cancelCloseDialog()" type="button" class="close" aria-label="Close"><span aria-hidden="true">Ã—</span></button>
        <h4 class="modal-title">{{ getModalTitle(action) }}</h4>
    </div>
    <div class="modal-body">
        <form novalidate role="form" class="form-horizontal left-alignment">
            <div class="box-body">
                <div class="form-group">
                    <label for="inputTitle" class="col-sm-3 control-label required-field">Title:</label>
                    <div class="col-sm-9">
                        <input *ngIf="action !== EnumActionType.View; else noticeTitleView" 
                            type="text" name="title" id="inputTitle" class="form-control" placeholder="Notice Title"
                            title="{{'NOTICE.TOOLTIP_TITLE' | translate}}"
                            [(ngModel)]="model.title" required>
                        <ng-template #noticeTitleView>
                            <div>{{model.title}}</div>
                        </ng-template>
                    </div>
                </div>
                <div class="form-group">
                    <label for="selectType" class="col-sm-3 control-label required-field">Type:</label>
                    <div class="col-sm-9">
                        <kendo-dropdownlist
                            *ngIf="action !== EnumActionType.View; else noticeTypeView"
                            name="noticeType"
                            title="{{'NOTICE.TOOLTIP_NOTICE_TYPES' | translate}}"
                            #typeIdField="kendoDropDownList"
                            [defaultItem]="defaultItem"
                            [data]="typeDataSource"
                            [textField]="'name'"
                            [valueField]="'typeId'"
                            id="selectType"
                            class="form-control"
                            [(ngModel)]="noticeType"
                            requiredComplexValue propertyName="typeId" required>
                        </kendo-dropdownlist>

                        <ng-template #noticeTypeView>
                            <div>{{typeName}}</div>
                        </ng-template>
                    </div>
                </div>
                <div class="form-group">
                    <label for="checkActive" class="col-sm-3 control-label">Active:</label>
                    <div class="col-sm-9 checkbox">
                        <label  *ngIf="action !== EnumActionType.View; else noticeActiveView">
                            <input title="{{'NOTICE.TOOLTIP_ACTIVE' | translate}}" 
                            id="checkActive" name="active" type="checkbox" [(ngModel)]="model.active">
                        </label>

                        <ng-template #noticeActiveView>
                            <div>{{model.active ? 'Yes' : 'No'}}</div>
                        </ng-template>
                    </div>
                </div>
                <div class="form-group">
                    <label for="activationDate" class="col-sm-3 control-label">Activation Date:</label>
                    <div class="col-sm-9">
                        <tds-date-control
                            *ngIf="action !== EnumActionType.View; else noticeActivationDateView"
                            title="{{'NOTICE.TOOLTIP_ACTIVATION_DATE' | translate}}"
                            id="activationDate"
                            name="activationDate"
                            [maximum]="maxDate"
                            (valueChange)="setMinDate($event)"
                            [value]="model.activationDate"
                            [(ngModel)]="model.activationDate">
                        </tds-date-control>
                        <ng-template #noticeActivationDateView>
                            <div *ngIf="model.activationDate">{{model.activationDate | tdsDate : userDateFormat}}</div>
                        </ng-template>
                    </div>
                </div>
                <div class="form-group">
                    <label for="expirationDate" class="col-sm-3 control-label">Expiration Date:</label>
                    <div class="col-sm-9">
                        <tds-date-control
                            *ngIf="action !== EnumActionType.View; else noticeExpirationDateView"
                            title="{{'NOTICE.TOOLTIP_EXPIRATION_DATE' | translate}}"
		                    id="expirationDate"
                            name="expirationDate"
                            [minimum]="minDate"
                            (valueChange)="setMaxDate($event)"
                            [value]="model.expirationDate"
                            [(ngModel)]="model.expirationDate">
                        </tds-date-control>
                        <ng-template #noticeExpirationDateView>
                            <div *ngIf="model.expirationDate">{{model.expirationDate | tdsDate : userDateFormat}}</div>
                        </ng-template>
                    </div>
                </div>

                <div class="form-group">
                    <label for="sequence" class="col-sm-3 control-label">Sequence:</label>
                    <div class="col-sm-1">
                        <kendo-numerictextbox
                            *ngIf="action !== EnumActionType.View; else noticeSequenceView"
                            title="{{'NOTICE.TOOLTIP_SEQUENCE' | translate}}"
                            [spinners]="false"
                            name="sequence"
                            [(ngModel)]="model.sequence"
                            [format]="'n0'"
                            [min]="0"
                            [max]="127"
                            [autoCorrect]="true">
                        </kendo-numerictextbox>
                        <ng-template #noticeSequenceView>
                            <div>{{model.sequence}}</div>
                        </ng-template>
                    </div>
	                <div class="col-sm-2">
	                </div>
                </div>
                <div class="form-group">
		            <label for="locked" class="col-sm-3 control-label">Locked:</label>
                    <div class="col-sm-9 checkbox">
                        <label *ngIf="action !== EnumActionType.View; else noticeLockedView">
                            <input 
                                [disabled]="noticeIsLocked" 
                                [ngClass]="{'is-disabled': noticeIsLocked}" 
                                title="{{'NOTICE.TOOLTIP_LOCKED' | translate}}"
                                id="locked" 
                                name="locked" 
                                type="checkbox" 
                                [(ngModel)]="model.locked">
                        </label>
                        <ng-template #noticeLockedView>
                            <div>{{model.locked ? 'Yes' : 'No'}}</div>
                        </ng-template>
	                </div>
                </div>

                <div class="form-group">
                    <label class="col-sm-12 control-label required-field vertical-label">Message:</label>
                    <div class="col-sm-12">
                        <rich-text-editor
                            [readonly]="noticeIsLocked || action === EnumActionType.View"
                            #htmlTextField
                            [elementId]="'htmlText'"
                            [required]="true"
                            [name]="'htmlText'"
                            (valueChange)="onValueChange($event)"
                            (rawValueChange)="onRawValueChange($event)"
                            (escHandler)="cancelCloseDialog()"
                            [rawValue]="model.rawText"
                            [value]="model.htmlText">
                        </rich-text-editor>
                    </div>
                </div>
                <div class="form-group"
                     *ngIf="noticeType && noticeType.typeId === MANDATORY">
                    <label for="acknowledgeLabel" class="col-sm-12 control-label required-field vertical-label">Post Message Text:</label>
	                <div class="col-sm-12">
                        <input type="text"
                            *ngIf="action !== EnumActionType.View; else noticeAcknowledgeView"
                            [readonly]="noticeIsLocked"
                            class="form-control"
                            name="acknowledgeLabel" id="acknowledgeLabel"
                            [(ngModel)]="model.acknowledgeLabel">

                        <ng-template #noticeAcknowledgeView>
                            <div>{{model.acknowledgeLabel}}</div>
                        </ng-template>                            
                    </div>
                </div>
            </div>
        </form>
    </div>
    <div class="modal-footer form-group-center">
        <button (click)="editNotice()" *ngIf="action === EnumActionType.View" type="button" class="btn btn-primary pull-left"><span class="fa fa-fw fa-pencil"></span>{{ 'GLOBAL.EDIT' | translate }}</button>
        <button (click)="saveNotice()" *ngIf="action !== EnumActionType.View" [disabled]="!formValid() || !isCreateEditAvailable() || !isDirty()" type="button" class="btn btn-primary pull-left"><span class="fa fa-fw fa-floppy-o"></span>{{ 'GLOBAL.SAVE' | translate }}</button>
        <button (click)="viewHTML()" type="button" class="btn btn-primary pull-left"><span class="fa fa-fw fa-code"></span>{{ 'NOTICE.VIEW_HTML' | translate }}</button>
        <button (click)="deleteNotice()" [disabled]="!isDeleteAvailable()" *ngIf="action === EnumActionType.Edit" type="button" class="btn btn-danger"><span class="fa fa-fw fa-trash"></span> {{ 'GLOBAL.DELETE' | translate }}</button>
        <button (click)="cancelCloseDialog()" *ngIf="action === EnumActionType.Edit || action === EnumActionType.Create" type="button" class="btn btn-default pull-right"><span class="glyphicon glyphicon-ban-circle"></span> {{'GLOBAL.CANCEL' | translate }}</button>
        <button (click)="cancelCloseDialog()" *ngIf="action === EnumActionType.View" type="button" class="btn btn-default pull-right"><span class="glyphicon glyphicon-ban-circle"></span> {{'GLOBAL.CLOSE' | translate }}</button>
    </div>
</div>