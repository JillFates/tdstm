<div class="summary-header">
    <label> Batch Summary <span *ngIf="summaryCollapsed">...</span>
        <button data-toggle="collapse" data-target=".collapsible"
                (click)="toggleSummary()"
                class="btn btn-default pull-right">
            <i [ngClass]="{'fa-angle-double-right': !summaryCollapsed, 'fa-angle-double-down': summaryCollapsed}"
               class="fa"></i>
        </button>
    </label>
</div>

<div class="collapse in collapsible">
        <div class="row header">
            <div class="col-sm-2">Batch ID</div>
            <div class="col-sm-2">Domain</div>
            <div class="col-sm-2">Imported At</div>
            <div class="col-sm-2">Imported By</div>
            <div class="col-sm-2">DataScript</div>
            <div class="col-sm-2">Status</div>
        </div>
        <div class="row">
            <div class="col-sm-2">{{importBatch.id}}</div>
            <div class="col-sm-2">{{importBatch.domainClassName}}</div>
            <div class="col-sm-2">{{importBatch.lastUpdated | userDateTime: dateTimeFormat }}</div>
            <div class="col-sm-2">{{importBatch.createdBy}}</div>
            <div class="col-sm-2">{{importBatch.dataScript?.name}}</div>
            <div class="col-sm-2" [ngClass]="{'error': batchHasErrors()}">
                {{importBatch.status.label}}
            </div>
        </div>
    </div>
<div class="collapse in collapsible">
        <label> Record Summary </label>
        <div class="row header">
            <div class="col-sm-2">Status</div>
            <div class="col-sm-2">Error Count</div>
            <div class="col-sm-2">Import Operation</div>
            <div class="col-sm-2">Source Row</div>
            <div class="col-sm-4 errors-header"><span>Errors</span></div>
        </div>
        <div class="row">
            <div class="col-sm-2" [ngClass]="{'error': batchHasErrors()}">
                {{batchRecord.status.label}}
            </div>
            <div class="col-sm-2" [ngClass]="{'error': batchHasErrors()}">
                {{batchRecord.errorCount}}
            </div>
            <div class="col-sm-2">{{batchRecord.operation}}</div>
            <div class="col-sm-2">{{batchRecord.sourceRowId}}</div>
            <div class="col-sm-4">
                <div class="error" *ngFor="let error of batchRecord.errorList">
                    * {{error}}
                </div>
            </div>
        </div>
    </div>