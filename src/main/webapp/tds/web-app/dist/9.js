(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{1125:function(t,e,i){"use strict";i.r(e);var r=i(1),o=i(0),n=i(10),s=i(15),a=i(200),d=i(65),p=i(269),c=i(46),l=i(24),u=(i(148),i(147),i(327)),h=function(){function t(t){this.http=t,this.jobProgressUrl="../ws/progress",this.dataIngestionUrl="../ws/dataingestion"}return t.prototype.getProviders=function(){return this.http.get(this.dataIngestionUrl+"/provider/list").map(function(t){var e=t.json(),i=e&&"success"===e.status&&e.data;return i.forEach(function(t){t.dateCreated=t.dateCreated?new Date(t.dateCreated):"",t.lastUpdated=t.lastUpdated?new Date(t.lastUpdated):""}),i}).catch(function(t){return t.json()})},t.prototype.saveProvider=function(t){var e={name:t.name,description:t.description,comment:t.comment};return t.id?this.http.put(this.dataIngestionUrl+"/provider/"+t.id,JSON.stringify(e)).map(function(t){var e=t.json();return e&&"success"===e.status&&e.data}).catch(function(t){return t.json()}):this.http.post(this.dataIngestionUrl+"/provider",JSON.stringify(e)).map(function(t){var e=t.json();return e&&"success"===e.status&&e.data}).catch(function(t){return t.json()})},t.prototype.validateUniquenessProviderByName=function(t){var e={};return t.id&&(e.providerId=t.id),this.http.post(this.dataIngestionUrl+"/provider/validateUnique/"+t.name,JSON.stringify(e)).map(function(t){var e=t.json();return e&&"success"===e.status&&e.data}).catch(function(t){return t.json()})},t.prototype.deleteProvider=function(t){return this.http.delete(this.dataIngestionUrl+"/provider/"+t).map(function(t){var e=t.json();return e&&"success"===e.status&&e.data}).catch(function(t){return t.json()})},t.prototype.filterColumn=function(t,e){var i=e.filter||{logic:"and",filters:[]},r=Object(u.e)(i).filter(function(e){return e.field===t.property})[0];if(t.filter||(t.filter=""),"text"===t.type&&(r?(r=i.filters.find(function(e){return e.field===t.property})).value=t.filter:i.filters.push({field:t.property,operator:"contains",value:t.filter,ignoreCase:!0})),"date"===t.type){var o=l.a.getInitEndFromDate(t.filter),n=o.init,s=o.end;r&&(e.filter.filters=this.getFiltersExcluding(t.property,e)),i.filters.push({field:t.property,operator:"gte",value:n}),i.filters.push({field:t.property,operator:"lte",value:s})}return"boolean"===t.type&&(r?t.filter===u.d?this.clearFilter(t,e):(r=i.filters.find(function(e){return e.field===t.property})).value="True"===t.filter:i.filters.push({field:t.property,operator:"eq",value:"True"===t.filter})),i},t.prototype.clearFilter=function(t,e){t.filter="",e.filter.filters=this.getFiltersExcluding(t.property,e)},t.prototype.getFiltersExcluding=function(t,e){return(e.filter&&e.filter.filters||[]).filter(function(e){return e.field!==t})},t.prototype.getJobProgress=function(t){return this.http.get(this.jobProgressUrl+"/"+t).map(function(t){return t.json()}).catch(function(t){return t.json()})},t=r.b([Object(o.B)(),r.d("design:paramtypes",[c.a])],t)}(),f=i(35),v=function(){function t(t,e){this.providerService=t,this.router=e}return t.prototype.resolve=function(t){var e=this;return this.providerService.getProviders().map(function(t){return t}).catch(function(t){return console.error("ProvidersResolveService:","An Error Occurred trying to fetch Provider List"),e.router.navigate(["/security/error"]),f.Observable.of(!1)})},t=r.b([Object(o.B)(),r.d("design:paramtypes",[h,d.c])],t)}(),m=i(270),y=i(42),g=i(38),b=i(77),D=i(67),E=i(903),S=function(){return function(t){this.columns=[{label:"Action",property:"action",type:"action",width:108,locked:!0},{label:"Name",property:"name",type:"text",width:208},{label:"Description",property:"description",type:"text",width:300},{label:"Date Create",property:"dateCreated",type:"date",format:t,width:170}]}}(),P=function(){return function(){}}(),w=i(28),C=i(13),T=function(){function t(t,e,i,r,o,n){this.originalModel=t,this.modalType=e,this.promptService=i,this.activeDialog=r,this.prompt=o,this.providerService=n,this.actionTypes=E.a,this.isUnique=!0,this.providerName=new C.Subject,this.providerModel=Object.assign({},this.originalModel),this.modalTitle=this.getModalTitle(this.modalType),this.dataSignature=JSON.stringify(this.providerModel),this.providerName.next(this.providerModel.name)}return t.prototype.onSaveProvider=function(){var t=this;this.providerService.saveProvider(this.providerModel).subscribe(function(e){t.activeDialog.close(e)},function(t){return console.log(t)})},t.prototype.ngOnInit=function(){var t=this;this.providerName.debounceTime(800).distinctUntilChanged().subscribe(function(e){e&&(e=e.trim()),e&&""!==e&&(t.providerModel.name=t.providerModel.name.trim(),t.providerService.validateUniquenessProviderByName(t.providerModel).subscribe(function(e){t.isUnique=e.isUnique},function(t){return console.log(t)}))}),setTimeout(function(){t.providerNameElement&&t.providerNameElement.nativeElement.focus()},500)},t.prototype.onValidateUniqueness=function(){this.providerName.next(this.providerModel.name)},t.prototype.isDirty=function(){return this.dataSignature!==JSON.stringify(this.providerModel)},t.prototype.cancelCloseDialog=function(){var t=this;this.isDirty()?this.promptService.open("Confirmation Required","You have changes that have not been saved. Do you want to continue and lose those changes?","Confirm","Cancel").then(function(e){e?t.activeDialog.dismiss():t.focusForm()}).catch(function(t){return console.log(t)}):this.activeDialog.dismiss()},t.prototype.changeToEditProvider=function(){this.modalType=this.actionTypes.EDIT,this.modalTitle=this.getModalTitle(this.modalType),this.focusForm()},t.prototype.onDeleteProvider=function(){var t=this;this.prompt.open("Confirmation Required","There are associated Datasources. Deleting this will not delete historical imports. Do you want to proceed?","Yes","No").then(function(e){e&&t.providerService.deleteProvider(t.providerModel.id).subscribe(function(e){t.activeDialog.close(e)},function(t){return console.log(t)})})},t.prototype.handleKeyboardEvent=function(t){t&&t.code===w.p.ESCAPE&&this.cancelCloseDialog()},t.prototype.isEmptyValue=function(){var t="";return this.providerModel.name&&(t=this.providerModel.name.trim()),""===t},t.prototype.focusForm=function(){this.providerContainer.nativeElement.focus()},t.prototype.getModalTitle=function(t){return t===E.a.CREATE?"Create Provider":t===E.a.EDIT?"Provider Edit":"Provider Detail"},r.b([Object(o.lb)("providerNameElement",{read:o.u}),r.d("design:type",o.u)],t.prototype,"providerNameElement",void 0),r.b([Object(o.lb)("providerContainer"),r.d("design:type",o.u)],t.prototype,"providerContainer",void 0),r.b([Object(o.z)("keydown",["$event"]),r.d("design:type",Function),r.d("design:paramtypes",[KeyboardEvent]),r.d("design:returntype",void 0)],t.prototype,"handleKeyboardEvent",null),t=r.b([Object(o.n)({selector:"provider-view-edit",templateUrl:"../tds/web-app/app-js/modules/provider/components/view-edit/provider-view-edit.component.html",styles:["\n        .has-error, .has-error:focus {\n            border: 1px #f00 solid;\n        }\n\t"]}),r.d("design:paramtypes",[P,Number,D.b,g.a,D.b,h])],t)}(),O=i(54),R=function(){function t(t,e,i,r,o,n,s,a){this.dialogService=t,this.permissionService=e,this.providerService=i,this.prompt=r,this.preferenceService=o,this.route=n,this.elementRef=s,this.renderer=a,this.state={sort:[{dir:"asc",field:"name"}],filter:{filters:[],logic:"and"}},this.skip=0,this.pageSize=w.l,this.defaultPageOptions=w.m,this.providerColumnModel=null,this.COLUMN_MIN_WIDTH=E.b,this.actionType=E.a,this.selectedRows=[],this.dateFormat="",this.state.take=this.pageSize,this.state.skip=this.skip,this.resultSet=this.route.snapshot.data.providers,this.gridData=Object(y.e)(this.resultSet,this.state)}return t.prototype.ngOnInit=function(){var t=this;this.preferenceService.getUserDatePreferenceAsKendoFormat().subscribe(function(e){t.dateFormat=e,t.providerColumnModel=new S("{0:"+e+"}")})},t.prototype.filterChange=function(t){this.state.filter=t,this.gridData=Object(y.e)(this.resultSet,this.state)},t.prototype.sortChange=function(t){this.state.sort=t,this.gridData=Object(y.e)(this.resultSet,this.state)},t.prototype.onFilter=function(t){var e=this.providerService.filterColumn(t,this.state);this.filterChange(e)},t.prototype.clearValue=function(t){this.providerService.clearFilter(t,this.state),this.filterChange(this.state.filter)},t.prototype.onCreateProvider=function(){this.openProviderDialogViewEdit({name:"",description:"",comment:""},E.a.CREATE)},t.prototype.onEdit=function(t){this.openProviderDialogViewEdit(t,E.a.EDIT)},t.prototype.onDelete=function(t){var e=this;this.prompt.open("Confirmation Required","There are associated Datasources. Deleting this will not delete historical imports. Do you want to proceed?","Yes","No").then(function(i){i&&e.providerService.deleteProvider(t.id).subscribe(function(t){e.reloadData()},function(t){return console.log(t)})})},t.prototype.cellClick=function(t){t.columnIndex>0&&(this.selectRow(t.dataItem.id),this.openProviderDialogViewEdit(t.dataItem,E.a.VIEW))},t.prototype.reloadData=function(){var t=this;this.providerService.getProviders().subscribe(function(e){t.resultSet=e,t.gridData=Object(y.e)(t.resultSet,t.state),setTimeout(function(){return t.forceDisplayLastRowAddedToGrid()},100)},function(t){return console.log(t)})},t.prototype.forceDisplayLastRowAddedToGrid=function(){var t=this.gridData.data.length-1,e=this.elementRef.nativeElement.querySelector('tr[data-kendo-grid-item-index="'+t+'"]');this.renderer.setStyle(e,"height","36px")},t.prototype.openProviderDialogViewEdit=function(t,e){var i=this;this.dialogService.open(T,[{provide:P,useValue:t},{provide:Number,useValue:e}]).then(function(t){i.reloadData()}).catch(function(t){console.log("Dismissed Dialog")})},t.prototype.selectRow=function(t){this.selectedRows=[],this.selectedRows.push(t)},t.prototype.onClickTemplate=function(t){t.target&&t.target.parentNode&&t.target.parentNode.click()},t.prototype.pageChange=function(t){this.skip=t.skip,this.state.skip=this.skip,this.state.take=t.take||this.state.take,this.pageSize=this.state.take,this.gridData=Object(y.e)(this.resultSet,this.state),jQuery(".k-grid-content-locked").addClass("element-height-100-per-i")},t=r.b([Object(o.n)({selector:"provider-list",templateUrl:"../tds/web-app/app-js/modules/provider/components/list/provider-list.component.html",styles:["\n        #btnCreateProvider { margin-left: 16px; }\n\t"]}),r.d("design:paramtypes",[g.b,b.a,h,D.b,O.c,d.a,o.u,o.Y])],t)}(),I=function(){function t(){}return t.PROVIDER_LIST={url:"list"},t}(),j=[{path:"",pathMatch:"full",redirectTo:I.PROVIDER_LIST.url},{path:I.PROVIDER_LIST.url,data:{page:{title:"PROVIDER.PROVIDERS",instruction:"",menu:["GLOBAL.PROJECT","PROVIDER.PROVIDERS"]},requiresAuth:!0},component:R,resolve:{providers:v},canActivate:[m.a,p.a]}],M=function(){function t(){}return t=r.b([Object(o.J)({exports:[d.d],imports:[d.d.forChild(j)]})],t)}(),N=i(1129),k=i(1114),U=i(1111),x=i(1116),V=i(1115);i.d(e,"ProviderModule",function(){return F});var F=function(){function t(){}return t=r.b([Object(o.J)({imports:[n.b,a.a,s.c,N.a,k.a,U.a,x.a,V.a,M],declarations:[R,T],providers:[p.a,v,h],exports:[R,T],entryComponents:[T]})],t)}()},903:function(t,e,i){"use strict";i.d(e,"b",function(){return n}),i.d(e,"c",function(){return s}),i.d(e,"e",function(){return a}),i.d(e,"a",function(){return r}),i.d(e,"d",function(){return o}),i.d(e,"f",function(){return d});var r,o,n=360,s=function(){return function(t){this.columns=[{label:"Action",property:"action",type:"action",width:108,locked:!0},{label:"Name",property:"name",type:"text",locked:!0},{label:"Provider",property:"provider.name",type:"text",width:220},{label:"Description",property:"description",type:"text"},{label:"Mode",property:"modeFormat",type:"text",width:200},{label:"Date Create",property:"dateCreated",type:"date",format:t,width:170},{label:"Last Modified",property:"lastUpdated",type:"date",format:t,width:170}]}}(),a=function(){return function(){}}();!function(t){t[t.VIEW=0]="VIEW",t[t.CREATE=1]="CREATE",t[t.EDIT=2]="EDIT"}(r||(r={})),function(t){t[t.IMPORT=0]="IMPORT",t[t.EXPORT=1]="EXPORT"}(o||(o={}));var d=function(){return function(t,e){this.gridHeight=23,this.columns=t,this.data=e}}()}}]);