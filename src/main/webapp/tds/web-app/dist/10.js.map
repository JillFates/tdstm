{"version":3,"sources":["webpack:///./web-app/app-js/modules/dataScript/components/console/data-script-console.component.ts","webpack:///./web-app/app-js/modules/dataScript/components/etl-builder/data-script-etl-builder.component.ts","webpack:///./web-app/app-js/modules/dataScript/components/list/data-script-list.component.ts","webpack:///./web-app/app-js/modules/dataScript/components/sample-data/data-script-sample-data.component.ts","webpack:///./web-app/app-js/modules/dataScript/components/view-edit/data-script-view-edit.component.ts","webpack:///./web-app/app-js/modules/dataScript/data-script-routing.states.ts","webpack:///./web-app/app-js/modules/dataScript/data-script.module.ts","webpack:///./web-app/app-js/modules/dataScript/model/script-result.models.ts","webpack:///./web-app/app-js/modules/dataScript/resolve/data-script-resolve.service.ts"],"names":[],"mappings":"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","file":"10.js","sourcesContent":["import {AfterViewInit, Component, Inject} from '@angular/core';\nimport { UIExtraDialog } from '../../../../shared/services/ui-dialog.service';\nimport {ScriptConsoleSettingsModel} from '../../model/script-result.models';\nimport {DecoratorOptions} from '../../../../shared/model/ui-modal-decorator.model';\n\ndeclare var jQuery: any;\nconst DIALOG_ID = '#viewConsole';\n\n@Component({\n\tselector: 'data-script-console',\n\ttemplateUrl: '../tds/web-app/app-js/modules/dataScript/components/console/data-script-console.component.html'\n})\nexport class DataScriptConsoleComponent extends UIExtraDialog implements AfterViewInit {\n\tpublic isWindowMaximized = false;\n\tpublic initialWindowStyle = null;\n\tpublic modalOptions: DecoratorOptions;\n\tconstructor(public consoleSettings: ScriptConsoleSettingsModel) {\n\t\tsuper(DIALOG_ID);\n\t\tthis.modalOptions = { isFullScreen: true, isResizable: true };\n\t}\n\n\tngAfterViewInit(): void {\n\t\tconsole.log('after view init');\n\t}\n\n\t/**\n\t * On close dialog store position/size settings.\n\t */\n\tprotected cancelCloseDialog(): void {\n\t\tthis.dismiss();\n\t}\n\n\tprotected maximizeWindow() {\n\t\tthis.isWindowMaximized = true;\n\t}\n\n\tprotected restoreWindow() {\n\t\tthis.isWindowMaximized = false;\n\t}\n\n}","import {Component, AfterViewInit, ViewChild, ElementRef} from '@angular/core';\nimport 'rxjs/add/operator/finally';\n\nimport { UIExtraDialog, UIDialogService } from '../../../../shared/services/ui-dialog.service';\nimport { DataScriptSampleDataComponent } from '../sample-data/data-script-sample-data.component';\nimport { DataScriptConsoleComponent } from '../console/data-script-console.component';\nimport {DataScriptModel, SampleDataModel} from '../../model/data-script.model';\nimport {\n\tDataScriptService, PROGRESSBAR_COMPLETED_STATUS, PROGRESSBAR_FAIL_STATUS\n} from '../../service/data-script.service';\nimport {NotifierService} from '../../../../shared/services/notifier.service';\nimport {UIPromptService} from '../../../../shared/directives/ui-prompt.directive';\nimport {PREFERENCES_LIST, PreferenceService } from '../../../../shared/services/preference.service';\nimport { ScriptConsoleSettingsModel, ScriptTestResultModel, ScriptValidSyntaxResultModel } from '../../model/script-result.models';\nimport {CodeMirrorComponent} from '../../../../shared/modules/code-mirror/code-mirror.component';\nimport {CHECK_ACTION, OperationStatusModel} from '../../../../shared/components/check-action/model/check-action.model';\nimport {DecoratorOptions} from '../../../../shared/model/ui-modal-decorator.model';\nimport {ApiResponseModel} from '../../../../shared/model/ApiResponseModel';\nimport {ImportAssetsService} from '../../../importBatch/service/import-assets.service';\nimport {TranslatePipe} from '../../../../shared/pipes/translate.pipe';\nimport {OBJECT_OR_LIST_PIPE} from '../../../../shared/pipes/utils.pipe';\nimport { isNullOrEmptyString } from '@progress/kendo-angular-grid/dist/es2015/utils';\nimport {DataGridOperationsHelper} from '../../../../shared/utils/data-grid-operations.helper';\nimport {FieldInfoType} from '../../../importBatch/components/record/import-batch-record-fields.component';\nimport {FieldReferencePopupHelper} from '../../../../shared/components/field-reference-popup/field-reference-popup.helper';\nimport {FieldReferencePopupComponent} from '../../../../shared/components/field-reference-popup/field-reference-popup.component';\n\n@Component({\n\tselector: 'data-script-etl-builder',\n\ttemplateUrl: '../tds/web-app/app-js/modules/dataScript/components/etl-builder/data-script-etl-builder.component.html'\n})\nexport class DataScriptEtlBuilderComponent extends UIExtraDialog implements AfterViewInit {\n\t@ViewChild('codeMirror') codeMirrorComponent: CodeMirrorComponent;\n\t@ViewChild('resizableForm') resizableForm: ElementRef;\n\tprivate collapsed = {\n\t\tcode: true,\n\t\tsample: false,\n\t\ttransform: false,\n\t};\n\tprivate script: string;\n\tprivate filename: string;\n\tprivate isWindowMaximized = false;\n\tprivate initialWindowStyle = null;\n\tprivate modalOptions: DecoratorOptions;\n\tprivate sampleDataModel: SampleDataModel = new SampleDataModel([], []);\n\tprotected sampleDataGridHelper: DataGridOperationsHelper;\n\tprivate operationStatus = {\n\t\tsave: undefined,\n\t\ttest: new OperationStatusModel(),\n\t\tsyntax: new OperationStatusModel(),\n\t};\n\tprivate consoleSettings: ScriptConsoleSettingsModel = new ScriptConsoleSettingsModel();\n\tprivate scriptTestResult: ScriptTestResultModel = new ScriptTestResultModel();\n\tprotected transformedDataGrids: Array<DataGridOperationsHelper>;\n\tprivate scriptValidSyntaxResult: ScriptValidSyntaxResultModel = new ScriptValidSyntaxResultModel();\n\tprivate closeErrorsSection = false;\n\tprotected CHECK_ACTION = CHECK_ACTION;\n\tprotected testScriptProgress = {\n\t\tprogressKey: null,\n\t\tcurrentProgress: 0,\n\t};\n\tpublic MESSAGE_FIELD_WILL_BE_INITIALIZED: string;\n\tprotected OBJECT_OR_LIST_PIPE = OBJECT_OR_LIST_PIPE;\n\tprotected FieldInfoType = FieldInfoType;\n\tprotected fieldReferencePopupHelper: FieldReferencePopupHelper;\n\n\tconstructor(\n\t\tprivate translatePipe: TranslatePipe,\n\t\tprivate dialogService: UIDialogService,\n\t\tprivate dataScriptModel: DataScriptModel,\n\t\tprivate dataIngestionService: DataScriptService,\n\t\tprivate importAssetsService: ImportAssetsService,\n\t\tprivate preferenceService: PreferenceService,\n\t\tprivate notifierService: NotifierService,\n\t\tprivate promptService: UIPromptService) {\n\t\t\tsuper('#etlBuilder');\n\t\t\tthis.script = '';\n\t\t\tthis.modalOptions = { isFullScreen: true, isResizable: true, sizeNamePreference: PREFERENCES_LIST.DATA_SCRIPT_SIZE };\n\t\t\tthis.loadETLScript();\n\t\t\tthis.fieldReferencePopupHelper = new FieldReferencePopupHelper();\n\t}\n\n\tngAfterViewInit(): void {\n\t\tthis.MESSAGE_FIELD_WILL_BE_INITIALIZED =  this.translatePipe.transform('DATA_INGESTION.DATASCRIPT.DESIGNER.FIELD_WILL_BE_INITIALIZED');\n\t\tthis.preferenceService.getDataScriptDesignerSize()\n\t\t\t.subscribe((size: {width: number, height: number}) => {\n\t\t\t\tsize.width = size.width >= window.innerWidth - 5 ? window.innerWidth : size.width;\n\t\t\t\tsize.height = size.height >= window.innerHeight - 5 ? window.innerHeight : size.height;\n\t\t\t\tthis.isWindowMaximized = (size.height === window.innerHeight && size.width === window.innerWidth);\n\t\t\t});\n\n\t\tsetTimeout(() => {\n\t\t\tthis.collapsed.code = false;\n\t\t}, 300);\n\t}\n\n\t/**\n\t * Loads the Script from API call, If a previous sampleFilename exists or has been uploaded before then it loads the\n\t * content calling the #extractSampleDataFromFile method.\n     */\n\tprivate loadETLScript(): void {\n\t\tthis.dataIngestionService.getETLScript(this.dataScriptModel.id).subscribe((result: ApiResponseModel) => {\n\t\t\tif (result.status === ApiResponseModel.API_SUCCESS) {\n\t\t\t\tthis.dataScriptModel = result.data.dataScript;\n\t\t\t\tthis.filename = this.dataScriptModel.sampleFilename;\n\t\t\t\tthis.script =  this.dataScriptModel.etlSourceCode ? this.dataScriptModel.etlSourceCode.slice(0) : '';\n\t\t\t\tif (this.filename && this.filename.length > 0) {\n\t\t\t\t\tthis.extractSampleDataFromFile(this.dataScriptModel.originalSampleFilename);\n\t\t\t\t}\n\t\t\t}\n\t\t}, error => console.log(error));\n\t}\n\n\t/**\n\t * Used to determine if the Refresh Sample Data button appears on the page\n\t * @return true if a JSON file has been uploaded and available\n\t */\n\tpublic showSampleDataRefresh(): boolean  {\n\t\treturn (!isNullOrEmptyString(this.dataScriptModel.sampleFilename) && this.dataScriptModel.sampleFilename.endsWith('.json'));\n\t}\n\n\t/**\n\t * On Test Script button.\n\t */\n\tprivate onTestScript(): void {\n\t\tthis.clearLogVariables('test');\n\t\tthis.clearSyntaxErrors();\n\t\tthis.operationStatus.test.state = CHECK_ACTION.IN_PROGRESS;\n\t\tthis.dataIngestionService.testScript(this.script, this.filename).subscribe( (result: ApiResponseModel) => {\n\t\t\tif (result.status === ApiResponseModel.API_SUCCESS && result.data.progressKey) {\n\t\t\t\tthis.testScriptProgress.progressKey = result.data.progressKey;\n\t\t\t\tthis.setProgressLoop();\n\t\t\t} else {\n\t\t\t\tthis.operationStatus.test.state = CHECK_ACTION.INVALID;\n\t\t\t}\n\t\t}, error => this.operationStatus.test.state = CHECK_ACTION.INVALID);\n\t}\n\n\t/**\n\t * Initializes the Progress loop.\n\t */\n\tprivate setProgressLoop(): void {\n\t\tthis.testScriptProgress.currentProgress = 0;\n\t\tthis.progressLoop();\n\t}\n\n\t/**\n\t * Progress loop, this function is called recursively until the progress finish.\n\t */\n\tprivate progressLoop(): void {\n\t\tthis.dataIngestionService.getJobProgress(this.testScriptProgress.progressKey)\n\t\t\t.subscribe( (response: ApiResponseModel) => {\n\t\t\t\tlet currentProgress = response.data.percentComp;\n\t\t\t\tthis.testScriptProgress.currentProgress = currentProgress;\n\t\t\t\t// On Fail\n\t\t\t\tif (response.data.status === PROGRESSBAR_FAIL_STATUS) {\n\t\t\t\t\tthis.scriptTestResult = new ScriptTestResultModel();\n\t\t\t\t\tthis.operationStatus.test.state = CHECK_ACTION.INVALID;\n\t\t\t\t\tthis.scriptTestResult.isValid = false;\n\t\t\t\t\tthis.scriptTestResult.error = response.data.data.message;\n\t\t\t\t\tthis.addSyntaxErrors([response.data.data.startLine - 1]);\n\n\t\t\t\t\t// On Success\n\t\t\t\t} else if (currentProgress === 100 && response.data.status === PROGRESSBAR_COMPLETED_STATUS) {\n\t\t\t\t\tsetTimeout( () => {\n\t\t\t\t\t\tthis.clearSyntaxErrors();\n\t\t\t\t\t\tlet scripTestFilename = response.data.detail;\n\t\t\t\t\t\tthis.operationStatus.test.state = CHECK_ACTION.VALID;\n\t\t\t\t\t\tthis.scriptTestResult = new ScriptTestResultModel();\n\t\t\t\t\t\tthis.scriptTestResult.isValid = true;\n\t\t\t\t\t\tthis.importAssetsService.getFileContent(scripTestFilename)\n\t\t\t\t\t\t\t.subscribe(result => {\n\t\t\t\t\t\t\t\tthis.scriptTestResult.domains = result.domains;\n\t\t\t\t\t\t\t\tthis.transformedDataGrids = [];\n\t\t\t\t\t\t\t\tthis.scriptTestResult.domains.forEach( (domain,  index) => {\n\t\t\t\t\t\t\t\t\tthis.transformedDataGrids[index] = new DataGridOperationsHelper(domain.data);\n\t\t\t\t\t\t\t\t\t// console.log(`${domain.domain}-${index.toString()}`);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tthis.scriptTestResult.consoleLog = result.consoleLog;\n\t\t\t\t\t\t\t\tthis.consoleSettings.scriptTestResult = this.scriptTestResult;\n\t\t\t\t\t\t\t\t// Finally re-load the Sample Data Preview if working with JSON files.\n\t\t\t\t\t\t\t\tif (this.showSampleDataRefresh()) {\n\t\t\t\t\t\t\t\t\tthis.reloadSampleData();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}, 500);\n\t\t\t\t} else {\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tthis.progressLoop();\n\t\t\t\t\t}, 2000)\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\t/**\n\t * On Check Script Syntax button.\n\t */\n\tprivate onCheckScriptSyntax(): void {\n\t\tthis.clearSyntaxErrors();\n\t\tthis.clearLogVariables('syntax');\n\t\tthis.dataIngestionService.checkSyntax(this.script, this.filename).subscribe( result => {\n\t\t\tthis.scriptValidSyntaxResult = result.data;\n\t\t\tthis.operationStatus.syntax.state = this.scriptValidSyntaxResult.validSyntax ? CHECK_ACTION.VALID : CHECK_ACTION.INVALID;\n\t\t\t// mark on code mirror error syntax if present.\n\t\t\tconst errorLines: Array<number> = this.scriptValidSyntaxResult.errors.map( error => {\n\t\t\t\treturn error.startLine - 1;\n\t\t\t});\n\t\t\tif (errorLines.length > 0) {\n\t\t\t\tthis.addSyntaxErrors(errorLines);\n\t\t\t} else {\n\t\t\t\tthis.clearSyntaxErrors();\n\t\t\t}\n\t\t});\n\t}\n\n\tprotected cancelCloseDialog($event): void {\n\t\tif ($event && $event.target && $event.target.classList.contains(FieldReferencePopupComponent.POPUP_ESC_TRIGGER_CLASS)) {\n\t\t\treturn;\n\t\t}\n\t\tif (this.isScriptDirty()) {\n\t\t\tthis.promptService.open(\n\t\t\t\t'Confirmation Required',\n\t\t\t\t'You have changes that have not been saved. Do you want to continue and lose those changes?',\n\t\t\t\t'Confirm', 'Cancel').then(result => {\n\t\t\t\t\tif (result) {\n\t\t\t\t\t\tthis.dismiss();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t} else {\n\t\t\tconst result = {\n\t\t\t\tupdated: this.operationStatus.save === 'success',\n\t\t\t\tnewEtlScriptCode: this.script\n\t\t\t};\n\n\t\t\tthis.close(result);\n\t\t}\n\t}\n\n\tprivate onSave(): void {\n\t\tthis.operationStatus.save = 'progress';\n\t\tthis.clearLogVariables();\n\t\tthis.dataIngestionService.saveScript(this.dataScriptModel.id, this.script).subscribe(\n\t\t\t(result) => {\n\t\t\t\tif (result) {\n\t\t\t\t\tthis.dataScriptModel.etlSourceCode = this.script.slice(0);\n\t\t\t\t\tthis.operationStatus.save = 'success';\n\t\t\t\t} else {\n\t\t\t\t\tthis.operationStatus.save = 'fail';\n\t\t\t\t}\n\t\t\t},\n\t\t\t(err) => {\n\t\t\t\tconsole.log(err);\n\t\t\t});\n\t}\n\n\tprotected isScriptDirty(): boolean {\n\t\treturn (this.dataScriptModel && (this.dataScriptModel.etlSourceCode !== this.script));\n\t}\n\n\tprivate onScriptChange(event: { newValue: string, oldValue: string }) {\n\t\tthis.operationStatus.save = undefined;\n\t\tthis.operationStatus.syntax.value = event.newValue;\n\t\tthis.operationStatus.test.value = event.newValue;\n\t}\n\n\tprotected toggleSection(section: string) {\n\t\tthis.collapsed[section] = !this.collapsed[section];\n\t}\n\n\tprotected onLoadSampleData(): void {\n\t\tthis.dialogService.extra(DataScriptSampleDataComponent, [\n\t\t\t{provide: 'etlScript', useValue: this.dataScriptModel}\n\t\t])\n\t\t\t.then((filename: {temporaryFileName: string, originalFileName: string}) => {\n\t\t\t\tthis.filename = filename.temporaryFileName;\n\t\t\t\tthis.extractSampleDataFromFile(filename.originalFileName);\n\t\t\t})\n\t\t\t.catch((err) => {\n\t\t\t\tconsole.log('SampleDataDialog error occurred..');\n\t\t\t\tif (err) {\n\t\t\t\t\tconsole.log(err);\n\t\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * On refresh sample data button click.\n\t */\n\tprotected reloadSampleData(): void {\n\t\tthis.extractSampleDataFromFile(this.dataScriptModel.originalSampleFilename);\n\t}\n\n\t/**\n\t * Call API and get the Sample Data content based on the FileName that has been already Uploaded or used.\n\t */\n\tprivate extractSampleDataFromFile(originalFileName?: string) {\n\t\tthis.clearLogVariables('sampleData');\n\t\tconst rootNode = this.extractRootNode();\n\t\tthis.dataIngestionService.getSampleData(this.dataScriptModel.id, this.filename, originalFileName, rootNode).subscribe((result) => {\n\t\t\tthis.sampleDataModel = result;\n\t\t\tif (this.sampleDataModel.data) {\n\t\t\t\tthis.sampleDataGridHelper = new DataGridOperationsHelper(this.sampleDataModel.data ? this.sampleDataModel.data : []);\n\t\t\t\tthis.dataIngestionService.getETLScript(this.dataScriptModel.id).subscribe((result: ApiResponseModel) => {\n\t\t\t\t\tif (result.status === ApiResponseModel.API_SUCCESS) {\n\t\t\t\t\t\tthis.dataScriptModel.originalSampleFilename = result.data.dataScript.originalSampleFilename;\n\t\t\t\t\t\tthis.dataScriptModel.sampleFilename = result.data.dataScript.sampleFilename;\n\t\t\t\t\t}\n\t\t\t\t}, error => console.log(error));\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Search and extracts the rootNode value if present from the current script code.\n\t * It assumes that rootNode syntax will be: rootNode 'myRootNode'\n\t * @returns {string}\n\t */\n\tprivate extractRootNode(): string {\n\t\tlet match = this.script.match(/\\s*rootNode\\s*(?:\"|')(.*)(?:\"|').*/);\n\t\tlet result = '';\n\t\tif (match !== null && match[1] !== null) {\n\t\t\tresult = match[1];\n\t\t}\n\t\treturn result;\n\t}\n\n\t/**\n\t * On View Console button open the console dialog.\n\t */\n\tprotected onViewConsole(): void {\n\t\tthis.dialogService.extra(DataScriptConsoleComponent, [{provide: ScriptConsoleSettingsModel, useValue: this.consoleSettings}], false, true)\n\t\t\t.then((result) => {/* on ok */} )\n\t\t\t.catch((result) => {/* on close/cancel */});\n\t}\n\n\tprivate testHasErrors(): boolean {\n\t\treturn !this.scriptTestResult.isValid && this.scriptTestResult.error && this.scriptTestResult.error.length > 0;\n\t}\n\n\tprotected sampleDataHasErrors(): boolean {\n\t\treturn this.sampleDataModel && this.sampleDataModel.errors && this.sampleDataModel.errors.length > 0;\n\t}\n\n\tprivate syntaxHasErrors(): boolean {\n\t\treturn !this.scriptValidSyntaxResult.validSyntax && this.scriptValidSyntaxResult.errors && this.scriptValidSyntaxResult.errors.length > 0;\n\t}\n\n\tprivate closeErrors(): void {\n\t\tthis.closeErrorsSection = true;\n\t}\n\n\tprivate getSyntaxErrors(): string {\n\t\tlet errors = this.scriptValidSyntaxResult.errors.map( error => {\n\t\t\treturn `message: ${error.message} --> start line: ${error.startLine}, end line: ${error.endLine}, start column: ${error.startColumn}, endColumn: ${error.endColumn}, fatal: ${error.fatal}`;\n\t\t});\n\t\treturn errors.join('\\n');\n\t};\n\n\tprivate clearLogVariables(operation?: string): void {\n\t\tthis.closeErrorsSection = false;\n\t\tif (operation === 'save') {\n\t\t\tthis.scriptTestResult = new ScriptTestResultModel();\n\t\t\tthis.consoleSettings.scriptTestResult = new ScriptTestResultModel();\n\t\t\tthis.scriptValidSyntaxResult = new ScriptValidSyntaxResultModel();\n\t\t}\n\t\tif (operation === 'test') {\n\t\t\tthis.scriptTestResult = new ScriptTestResultModel();\n\t\t\tthis.consoleSettings.scriptTestResult = new ScriptTestResultModel();\n\t\t\t// also clean syntax results\n\t\t\tthis.scriptValidSyntaxResult = new ScriptValidSyntaxResultModel();\n\t\t}\n\t\tif (operation === 'syntax') {\n\t\t\tthis.scriptValidSyntaxResult = new ScriptValidSyntaxResultModel();\n\t\t\t// also clean test results\n\t\t\tthis.scriptValidSyntaxResult = new ScriptValidSyntaxResultModel();\n\t\t}\n\t\tif (operation === 'sampleData') {\n\t\t\tthis.sampleDataModel = null;\n\t\t}\n\t}\n\n\tprotected isCheckSyntaxDisabled(): boolean {\n\t\treturn !this.script || !this.filename;\n\t}\n\n\tprotected isTestDisabled(): boolean {\n\t\treturn !this.script || !this.filename || this.operationStatus.test.state === CHECK_ACTION.IN_PROGRESS;\n\t}\n\n\tprotected maximizeWindow() {\n\t\tconst { width, height } = this.resizableForm.nativeElement.style;\n\t\tthis.initialWindowStyle = { width, height };\n\t\tthis.isWindowMaximized = true;\n\t}\n\n\tprotected restoreWindow() {\n\t\tthis.isWindowMaximized = false;\n\t}\n\n\t/**\n\t * if value is present return value otherwise returns init\n\t */\n\tprotected getInitOrValue(dataItem): string {\n\t\tif (dataItem.value) {\n\t\t\treturn dataItem.value;\n\t\t} else {\n\t\t\treturn (dataItem.init || '');\n\t\t}\n\t}\n\n\t/**\n\t * Clears out ALL the Syntax Error class of the given line numbers stored in currentErrorLines.\n\t * If the codeMirrorComponent object is empty, it does nothing.\n\t */\n\tprivate clearSyntaxErrors(): void {\n\t\tif (this.codeMirrorComponent) {\n\t\t\tthis.codeMirrorComponent.clearSyntaxErrors();\n\t\t}\n\t}\n\n\t/**\n\t * Adds Syntax Error class to the given line numbers (lines index starts at 0)\n\t * If the codeMirrorComponent object is empty, it does nothing.\n\t * @param {Array<number>} lineNumbers\n\t */\n\tprivate addSyntaxErrors(lineNumbers: Array<number>) {\n\t\tif (this.codeMirrorComponent) {\n\t\t\tthis.codeMirrorComponent.addSyntaxErrors(lineNumbers);\n\t\t}\n\t}\n}\n","import { Component, Inject, OnInit } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { process, CompositeFilterDescriptor, SortDescriptor, State } from '@progress/kendo-data-query';\nimport { CellClickEvent, RowArgs, DataStateChangeEvent, GridDataResult } from '@progress/kendo-angular-grid';\n\nimport { DataScriptService } from '../../service/data-script.service';\nimport { UIDialogService } from '../../../../shared/services/ui-dialog.service';\nimport { PermissionService } from '../../../../shared/services/permission.service';\nimport { UIPromptService } from '../../../../shared/directives/ui-prompt.directive';\nimport { COLUMN_MIN_WIDTH, DataScriptColumnModel, DataScriptModel, DataScriptMode, Flatten, ActionType } from '../../model/data-script.model';\nimport { DataScriptViewEditComponent } from '../view-edit/data-script-view-edit.component';\nimport {GRID_DEFAULT_PAGINATION_OPTIONS, GRID_DEFAULT_PAGE_SIZE} from '../../../../shared/model/constants';\nimport {PreferenceService} from '../../../../shared/services/preference.service';\nimport {ActivatedRoute} from '@angular/router';\n\n@Component({\n\tselector: 'data-script-list',\n\ttemplateUrl: '../tds/web-app/app-js/modules/dataScript/components/list/data-script-list.component.html',\n\tstyles: [`\n\t\t#btnCreateDataScript { margin-left: 16px; }\n\t\t.action-header { width:100%; text-align:center; }\n\t`]\n})\nexport class DataScriptListComponent implements OnInit {\n\n\tprivate state: State = {\n\t\tsort: [{\n\t\t\tdir: 'asc',\n\t\t\tfield: 'name'\n\t\t}],\n\t\tfilter: {\n\t\t\tfilters: [],\n\t\t\tlogic: 'and'\n\t\t}\n\t};\n\n\tpublic pageSize = GRID_DEFAULT_PAGE_SIZE;\n\tpublic skip = 0;\n\tpublic defaultPageOptions = GRID_DEFAULT_PAGINATION_OPTIONS;\n\tpublic dataScriptColumnModel = null;\n\tpublic COLUMN_MIN_WIDTH = COLUMN_MIN_WIDTH;\n\tpublic actionType = ActionType;\n\tpublic gridData: GridDataResult;\n\tpublic resultSet: DataScriptModel[];\n\tpublic selectedRows = [];\n\tpublic isRowSelected = (e: RowArgs) => this.selectedRows.indexOf(e.dataItem.id) >= 0;\n\tpublic dateFormat = '';\n\n\tconstructor(\n\t\tprivate route: ActivatedRoute,\n\t\tprivate dialogService: UIDialogService,\n\t\tprivate permissionService: PermissionService,\n\t\tprivate dataIngestionService: DataScriptService,\n\t\tprivate prompt: UIPromptService,\n\t\tprivate preferenceService: PreferenceService) {\n\t\tthis.state.take = this.pageSize;\n\t\tthis.state.skip = this.skip;\n\t\tthis.setDataGrid(this.route.snapshot.data['dataScripts']);\n\t}\n\n\t/**\n\t * Set the grid data, mapping the modeFormat column\n\t * @param {DataScriptModel[]} result\n\t */\n\tsetDataGrid(result: DataScriptModel[]): void {\n\t\tthis.resultSet = result;\n\t\tthis.resultSet.forEach(item => {\n\t\t\titem['modeFormat'] = item.mode ? 'Export' : 'Import'\n\t\t});\n\n\t\tthis.gridData = process(this.resultSet, this.state);\n\t}\n\n\tngOnInit() {\n\t\tthis.preferenceService.getUserDatePreferenceAsKendoFormat()\n\t\t\t.subscribe((dateFormat) => {\n\t\t\t\tthis.dateFormat = dateFormat;\n\t\t\t\tthis.dataScriptColumnModel = new DataScriptColumnModel(`{0:${dateFormat}}`);\n\t\t\t});\n\t}\n\n\tprotected filterChange(filter: CompositeFilterDescriptor): void {\n\t\tthis.state.filter = filter;\n\t\tthis.gridData = process(this.resultSet, this.state);\n\t}\n\n\tprotected sortChange(sort): void {\n\t\tthis.state.sort = sort;\n\t\tthis.gridData = process(this.resultSet, this.state);\n\t}\n\n\tprotected onFilter(column: any): void {\n\t\tconst root = this.dataIngestionService.filterColumn(column, this.state);\n\t\tthis.filterChange(root);\n\t}\n\n\tprotected clearValue(column: any): void {\n\t\tthis.dataIngestionService.clearFilter(column, this.state);\n\t\tthis.filterChange(this.state.filter);\n\t}\n\n\tprotected onCreateDataScript(): void {\n\t\tlet dataScriptModel: DataScriptModel = {\n\t\t\tname: '',\n\t\t\tdescription: '',\n\t\t\tmode: DataScriptMode.IMPORT,\n\t\t\tprovider: { id: null, name: '' }\n\t\t};\n\t\tthis.openDataScriptDialogViewEdit(dataScriptModel, ActionType.CREATE);\n\t}\n\n\t/**\n\t * Select the current element and open the Edit Dialog\n\t * @param {ModalType} type\n\t * @param dataItem\n\t */\n\tprotected onEditDataScript(dataItem: any): void {\n\t\tthis.openDataScriptDialogViewEdit(dataItem, ActionType.EDIT);\n\t}\n\n\t/**\n\t * Delete the selected DataScript\n\t * @param dataItem\n\t */\n\tprotected onDeleteDataScript(dataItem: any): void {\n\t\tthis.dataIngestionService.validateDeleteScript(dataItem.id).subscribe(\n\t\t\t(result) => {\n\t\t\t\tif (result && result['canDelete']) {\n\t\t\t\t\tthis.prompt.open('Confirmation Required', 'Do you want to proceed?', 'Yes', 'No')\n\t\t\t\t\t\t.then((res) => {\n\t\t\t\t\t\t\tif (res) {\n\t\t\t\t\t\t\t\tthis.deleteDataScript(dataItem);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tthis.prompt.open('Confirmation Required', 'There are Ingestion Batches that have used this DataScript. Deleting this will not delete the batches but will no longer reference a DataScript. Do you want to proceed?', 'Yes', 'No')\n\t\t\t\t\t\t.then((res) => {\n\t\t\t\t\t\t\tif (res) {\n\t\t\t\t\t\t\t\tthis.deleteDataScript(dataItem);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\t(err) => console.log(err));\n\t}\n\n\t/**\n\t * Execute the Service to delete the DataScript\n\t */\n\tprivate deleteDataScript(dataItem: any): void {\n\t\tthis.dataIngestionService.deleteDataScript(dataItem.id).subscribe(\n\t\t\t(result) => {\n\t\t\t\tthis.reloadDataScripts();\n\t\t\t},\n\t\t\t(err) => console.log(err));\n\t}\n\n\t/**\n\t * Catch the Selected Row\n\t * @param {SelectionEvent} event\n\t */\n\tprotected cellClick(event: CellClickEvent): void {\n\t\tif (event.columnIndex > 0) {\n\t\t\tthis.selectRow(event['dataItem'].id);\n\t\t\tthis.openDataScriptDialogViewEdit(event['dataItem'], ActionType.VIEW);\n\t\t}\n\t}\n\n\tprotected reloadDataScripts(): void {\n\t\tthis.dataIngestionService.getDataScripts().subscribe(\n\t\t\t(result: DataScriptModel[]) => { this.setDataGrid(result); },\n\t\t\t(err) => console.log(err));\n\t}\n\n\t/**\n\t * Open The Dialog to Create, View or Edit the DataScript\n\t * @param {DataScriptModel} dataScriptModel\n\t * @param {number} actionType\n\t */\n\tprivate openDataScriptDialogViewEdit(dataScriptModel: DataScriptModel, actionType: number): void {\n\t\tthis.dialogService.open(DataScriptViewEditComponent, [\n\t\t\t{ provide: DataScriptModel, useValue: dataScriptModel },\n\t\t\t{ provide: Number, useValue: actionType }\n\t\t]).then(result => {\n\t\t\tthis.reloadDataScripts();\n\t\t\tif (actionType === ActionType.CREATE) {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.selectRow(result.dataScript.id);\n\t\t\t\t\tthis.openDataScriptDialogViewEdit(result.dataScript, ActionType.VIEW);\n\t\t\t\t}, 500);\n\t\t\t}\n\t\t}).catch(result => {\n\t\t\t// on dialog close, do nothing ..\n\t\t});\n\t}\n\n\tprivate selectRow(dataItemId: number): void {\n\t\tthis.selectedRows = [];\n\t\tthis.selectedRows.push(dataItemId);\n\t}\n\n\t/**\n\t * Make the entire header clickable on Grid\n\t * @param event: any\n\t */\n\tpublic onClickTemplate(event: any): void {\n\t\tif (event.target && event.target.parentNode) {\n\t\t\tevent.target.parentNode.click();\n\t\t}\n\t}\n\n\tpublic pageChange(event: any): void {\n\t\tthis.skip = event.skip;\n\t\tthis.state.skip = this.skip;\n\t\tthis.state.take = event.take || this.state.take;\n\t\tthis.pageSize = this.state.take;\n\t\tthis.gridData = process(this.resultSet, this.state);\n\t}\n}\n","import {Component, Inject, OnInit, ViewChild} from '@angular/core';\nimport {UIExtraDialog} from '../../../../shared/services/ui-dialog.service';\nimport {\n\tFileRestrictions,\n\tRemoveEvent,\n\tSuccessEvent,\n\tUploadComponent,\n\tUploadEvent\n} from '@progress/kendo-angular-upload';\nimport {DataScriptService} from '../../service/data-script.service';\nimport {NotifierService} from '../../../../shared/services/notifier.service';\nimport {AlertType} from '../../../../shared/model/alert.model';\nimport {ImportAssetsService} from '../../../importBatch/service/import-assets.service';\nimport {KendoFileUploadBasicConfig} from '../../../../shared/providers/kendo-file-upload.interceptor';\nimport {\n\tETL_SCRIPT_FILE_UPLOAD_TYPE,\n\tFILE_UPLOAD_TYPE_PARAM,\n\tREMOVE_FILENAME_PARAM\n} from '../../../../shared/model/constants';\nimport {DataScriptModel} from '../../model/data-script.model';\n\n@Component({\n\tselector: 'data-script-sample-data',\n\ttemplateUrl: '../tds/web-app/app-js/modules/dataScript/components/sample-data/data-script-sample-data.component.html',\n})\nexport class DataScriptSampleDataComponent extends UIExtraDialog {\n\n\t@ViewChild('kendoUploadInstance') kendoUploadInstance: UploadComponent;\n\tprotected file: KendoFileUploadBasicConfig = new KendoFileUploadBasicConfig();\n\tprotected originalFileName: any = { temporary: null, fileUploaded: null};\n\tprotected OPTIONS: any = {\n\t\tFILE: 'file',\n\t\tSERVICE: 'service',\n\t\tCSV: 'csv',\n\t\tselected: undefined,\n\t\tuseFileFrom: undefined\n\t};\n\tprivate csv: any = {\n\t\toptions : [\n\t\t\t{ text: 'Select a format', value: -1 },\n\t\t\t{ text: 'csv', value: 0 },\n\t\t\t{ text: 'json', value: 3 }\n\t\t],\n\t\tselected : undefined,\n\t\tfileContent : '',\n\t\tfilename: null,\n\t\tstate: undefined,\n\t};\n\tprivate webService: any = {\n\t\toptions: [],\n\t\tselected: undefined,\n\t\tstate: undefined,\n\t\tfilename: null,\n\t};\n\n\tprivate autoETL = false;\n\tprivate assetClassOptions: Array<any> = [\n\t\t{ text: 'Select a class', value:  -1 },\n\t\t{ text: 'Application', value: 0 },\n\t\t{ text: 'Device', value: 1 }\n\t];\n\tprivate assetClassSelected = this.assetClassOptions[0];\n\tprivate apiActionOptions = [];\n\n\tconstructor(\n\t\t@Inject('etlScript') protected etlScriptModel: DataScriptModel,\n\t\tprivate dataIngestionService: DataScriptService,\n\t\tprivate notifierService: NotifierService,\n\t\tprivate importAssetsService: ImportAssetsService) {\n\t\t\tsuper('#loadSampleData');\n\t\t\tthis.onPageLoad();\n\t}\n\n\t/**\n\t * On Page loads, pre-select default options.\n\t * Set File radio button as pre-selected.\n\t * Pre-select option with value 1(CSV) on file content type options.\n\t * Load Manual Options for web services dropdown.\n\t */\n\tprivate onPageLoad(): void {\n\t\tthis.file.uploadedFilename = null;\n\t\tthis.csv.selected = this.csv.options[0];\n\t\tthis.OPTIONS.selected = this.OPTIONS.FILE;\n\t\tthis.importAssetsService.getManualOptions().subscribe( (result) => {\n\t\t\tif (result.actions && result.actions.length > 0) {\n\t\t\t\tthis.webService.options = result.actions;\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * On Continue button click.\n\t * Set the current sample data upload type and close the dialog.\n\t */\n\tprivate onContinue(): void {\n\t\tlet filename: any = { temporaryFileName: null, originalFileName: null};\n\t\tif (this.OPTIONS.useFileFrom === this.OPTIONS.CSV) {\n\t\t\tfilename.temporaryFileName = this.csv.filename;\n\t\t\tfilename.originalFileName = this.csv.filename;\n\t\t}\n\t\tif (this.OPTIONS.useFileFrom === this.OPTIONS.SERVICE) {\n\t\t\tfilename.temporaryFileName = this.webService.filename;\n\t\t\tfilename.originalFileName = this.webService.filename;\n\t\t}\n\t\tif (this.OPTIONS.useFileFrom === this.OPTIONS.FILE) {\n\t\t\tfilename.temporaryFileName = this.file.uploadedFilename;\n\t\t\tfilename.originalFileName = this.originalFileName.fileUploaded;\n\t\t}\n\t\tthis.close(filename);\n\t}\n\n\t/**\n\t * Validates the form.\n\t * Filename should not be empty for the current selection.\n\t * @returns {boolean}\n\t */\n\tprivate validForm(): boolean {\n\t\tif (this.OPTIONS.selected === this.OPTIONS.CSV && this.csv.filename) {\n\t\t\treturn true;\n\t\t} else if (this.OPTIONS.selected === this.OPTIONS.SERVICE && this.webService.filename) {\n\t\t\treturn true;\n\t\t} else if (this.OPTIONS.selected === this.OPTIONS.FILE && this.file.uploadedFilename) {\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\t/**\n\t * Upload Content action.\n\t * On Upload button click.\n\t */\n\tprivate onUploadFileText(): void {\n\t\tthis.dataIngestionService.uploadETLScriptFileText(this.csv.fileContent, this.csv.selected.text).subscribe( result => {\n\t\t\tif (result.status === 'success' && result.data.filename) {\n\t\t\t\tthis.csv.filename = result.data.filename;\n\t\t\t\tthis.csv.state = 'success';\n\t\t\t\tthis.OPTIONS.useFileFrom = this.OPTIONS.CSV;\n\t\t\t} else {\n\t\t\t\tthis.csv.state = 'fail';\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Fetch from webservice action.\n\t * On Fetch button click.\n\t */\n\tprivate onFetch(): void {\n\t\tthis.importAssetsService.postFetch(this.webService.selected).subscribe( (result) => {\n\t\t\tif (result.status === 'success') {\n\t\t\t\tthis.webService.state = 'success';\n\t\t\t\tthis.webService.filename = result.data.filename;\n\t\t\t\tthis.OPTIONS.useFileFrom = this.OPTIONS.SERVICE;\n\t\t\t} else {\n\t\t\t\tthis.notifierService.broadcast({\n\t\t\t\t\tname: AlertType.DANGER,\n\t\t\t\t\tmessage: result.errors[0]\n\t\t\t\t});\n\t\t\t\tthis.webService.state = 'fail';\n\t\t\t}\n\t\t} );\n\t}\n\n\t/**\n\t * Upload File event.\n\t * On upload completed.\n\t * @param {SuccessEvent} e\n\t */\n\tprivate completeEventHandler(e: SuccessEvent) {\n\t\tlet response = e.response.body.data;\n\t\tif (response.operation === 'delete') { // file deleted successfully\n\t\t\t// console.log(response.data);\n\t\t\tthis.clearFilename();\n\t\t} else { // file uploaded successfully\n\t\t\tlet filename = response.filename;\n\t\t\tthis.file.uploadedFilename = filename;\n\t\t\tthis.OPTIONS.useFileFrom = this.OPTIONS.FILE;\n\t\t\tthis.originalFileName.fileUploaded = this.originalFileName.temporary;\n\t\t}\n\t}\n\n\tprotected onUploadFile(e: UploadEvent): void {\n\t\te.data = {};\n\t\te.data[FILE_UPLOAD_TYPE_PARAM] = ETL_SCRIPT_FILE_UPLOAD_TYPE;\n\t\tthis.clearFilename();\n\t\tthis.originalFileName.temporary = e.files[0].name;\n\t}\n\n\t/**\n\t * Upload File action.\n\t * On clear file name.\n\t * @param e\n\t */\n\tprivate clearFilename(e?: any) {\n\t\tthis.file.uploadedFilename = null;\n\t\tthis.OPTIONS.useFileFrom = null;\n\t\tthis.originalFileName.temporary = null;\n\t\tthis.originalFileName.fileUploaded = null;\n\t}\n\n\t/**\n\t * Upload File action.\n\t * On Remove file button click.\n\t * @param {RemoveEvent} e\n\t */\n\tprivate onRemoveFile(e: RemoveEvent) {\n\t\te.data = {};\n\t\te.data[REMOVE_FILENAME_PARAM] = this.file.uploadedFilename;\n\t}\n\n\t/**\n\t * On Cancel Close Dialog Popup Component.\n\t */\n\tprotected cancelCloseDialog(): void {\n\t\tthis.dismiss();\n\t}\n}","import {Component, HostListener, OnInit, ViewChild, ElementRef } from '@angular/core';\nimport { Subject } from 'rxjs/Subject';\nimport { Observable } from 'rxjs';\nimport 'rxjs/add/operator/debounceTime';\nimport 'rxjs/add/operator/distinctUntilChanged';\nimport 'rxjs/add/operator/filter';\nimport 'rxjs/add/operator/mergeMap';\n\nimport { DropDownListComponent } from '@progress/kendo-angular-dropdowns';\nimport { UIActiveDialogService, UIDialogService } from '../../../../shared/services/ui-dialog.service';\nimport { DataScriptModel, ActionType, DataScriptMode } from '../../model/data-script.model';\nimport { ProviderModel } from '../../../provider/model/provider.model';\nimport { DataScriptService } from '../../service/data-script.service';\nimport { UIPromptService } from '../../../../shared/directives/ui-prompt.directive';\nimport { DataScriptEtlBuilderComponent } from '../etl-builder/data-script-etl-builder.component';\nimport {KEYSTROKE} from '../../../../shared/model/constants';\n\nconst DEBOUNCE_MILLISECONDS = 800;\n@Component({\n\tselector: 'data-script-view-edit',\n\ttemplateUrl: '../tds/web-app/app-js/modules/dataScript/components/view-edit/data-script-view-edit.component.html',\n\tstyles: [`\n        .has-error, .has-error:focus {\n            border: 1px #f00 solid;\n        }\n\t`]\n})\nexport class DataScriptViewEditComponent implements OnInit {\n\t@ViewChild('dataScriptProvider', { read: DropDownListComponent }) dataScriptProvider: DropDownListComponent;\n\t@ViewChild('dataScriptContainer') dataScriptContainer: ElementRef;\n\tpublic dataScriptModel: DataScriptModel;\n\tpublic providerList = new Array<ProviderModel>();\n\tpublic modalTitle: string;\n\tpublic dataScriptMode = DataScriptMode;\n\tpublic actionTypes = ActionType;\n\tprivate dataSignature: string;\n\tprivate isUnique = true;\n\tprivate datasourceName = new Subject<String>();\n\tprivate etlScriptCode = {\n\t\tupdated: false,\n\t\tcode: null\n\t};\n\n\tconstructor(\n\t\tpublic originalModel: DataScriptModel,\n\t\tpublic modalType: ActionType,\n\t\tpublic promptService: UIPromptService,\n\t\tpublic activeDialog: UIActiveDialogService,\n\t\tprivate prompt: UIPromptService,\n\t\tprivate dataIngestionService: DataScriptService,\n\t\tprivate dialogService: UIDialogService) {\n\n\t\tthis.dataScriptModel = Object.assign({}, this.originalModel);\n\t\tthis.getProviders();\n\t\tthis.modalTitle = (this.modalType === ActionType.CREATE) ? 'Create ETL Script' : (this.modalType === ActionType.EDIT ? 'ETL Script Edit' : 'ETL Script Detail');\n\t\t// ignore etl script from this context\n\t\tlet copy = {...this.dataScriptModel};\n\t\tthis.etlScriptCode.code = copy.etlSourceCode;\n\t\tdelete copy.etlSourceCode;\n\t\tthis.dataSignature = JSON.stringify(copy);\n\t\tthis.datasourceName.next(this.dataScriptModel.name);\n\t}\n\n\t/**\n\t * Get the List of Providers\n\t */\n\tgetProviders(): void {\n\t\tthis.dataIngestionService.getProviders().subscribe(\n\t\t\t(result: any) => {\n\t\t\t\tif (this.modalType === ActionType.CREATE) {\n\t\t\t\t\tthis.providerList.push({ id: 0, name: 'Select...' });\n\t\t\t\t\tthis.dataScriptModel.provider = this.providerList[0];\n\t\t\t\t}\n\t\t\t\tthis.providerList.push(...result);\n\t\t\t\tlet copy = {...this.dataScriptModel};\n\t\t\t\tthis.etlScriptCode.code = copy.etlSourceCode;\n\t\t\t\tdelete copy.etlSourceCode;\n\t\t\t\tthis.dataSignature = JSON.stringify(copy);\n\t\t\t\tsetTimeout(() => { // Delay issues on Auto Focus\n\t\t\t\t\tif (this.dataScriptProvider) {\n\t\t\t\t\t\tthis.dataScriptProvider.focus();\n\t\t\t\t\t}\n\t\t\t\t}, 500);\n\n\t\t\t},\n\t\t\t(err) => console.log(err));\n\t}\n\n\t/**\n\t * Create a new DataScript\n\t */\n\tprotected onSaveDataScript(): void {\n\t\tthis.dataScriptModel.etlSourceCode = this.etlScriptCode.code;\n\t\tthis.dataIngestionService.saveDataScript(this.dataScriptModel).subscribe(\n\t\t\t(result: any) => {\n\t\t\t\tthis.activeDialog.close(result);\n\t\t\t},\n\t\t\t(err) => console.log(err));\n\t}\n\n\tngOnInit(): void {\n\t\tconst notEmptyViewName$: Observable<String> = this.datasourceName\n\t\t\t.debounceTime(DEBOUNCE_MILLISECONDS)\n\t\t\t.distinctUntilChanged()\n\t\t\t.filter((name: string) => Boolean(name && name.trim()));\n\n\t\tnotEmptyViewName$\n\t\t\t.flatMap(() => this.dataIngestionService.validateUniquenessDataScriptByName(this.dataScriptModel))\n\t\t\t.subscribe( (isUnique: boolean) => this.isUnique = isUnique,\n\t\t\t\t(error: Error) => console.log(error.message));\n\t}\n\n\tprotected onValidateUniqueness(): void {\n\t\tthis.datasourceName.next(this.dataScriptModel.name);\n\t}\n\n\t/**\n\t * Detect if the use has pressed the on Escape to close the dialog and popup if there are pending changes.\n\t * @param {KeyboardEvent} event\n\t */\n\t@HostListener('keydown', ['$event']) handleKeyboardEvent(event: KeyboardEvent) {\n\t\tif (event && event.code === KEYSTROKE.ESCAPE) {\n\t\t\tthis.cancelCloseDialog();\n\t\t}\n\t}\n\n\t/**\n\t * Verify the Object has not changed\n\t * - Ignore etl-script changes\n\t * @returns {boolean}\n\t */\n\tprotected isDirty(): boolean {\n\t\tlet copy = {...this.dataScriptModel};\n\t\tthis.etlScriptCode.code = copy.etlSourceCode;\n\t\tdelete copy.etlSourceCode;\n\t\treturn this.dataSignature !== JSON.stringify(copy);\n\t}\n\n\tprivate focusForm() {\n\t\tthis.dataScriptContainer.nativeElement.focus();\n\t}\n\n\t/**\n\t * Close the Dialog but first it verify is not Dirty\n\t */\n\tprotected cancelCloseDialog(): void {\n\t\tif (this.isDirty()) {\n\t\t\tthis.promptService.open(\n\t\t\t\t'Confirmation Required',\n\t\t\t\t'You have changes that have not been saved. Do you want to continue and lose those changes?',\n\t\t\t\t'Confirm', 'Cancel')\n\t\t\t\t.then(confirm => {\n\t\t\t\t\tif (confirm) {\n\t\t\t\t\t\tthis.activeDialog.dismiss();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.focusForm();\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch((error) => console.log(error));\n\t\t} else {\n\t\t\tif (this.etlScriptCode.updated) {\n\t\t\t\tthis.activeDialog.close();\n\t\t\t} else {\n\t\t\t\tthis.activeDialog.dismiss();\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Change the View Mode to Edit Mode\n\t */\n\tprotected changeToEditDataScript(): void {\n\t\tthis.modalType = this.actionTypes.EDIT;\n\t\tthis.modalTitle = 'ETL Script Edit';\n\t\tthis.focusForm();\n\t}\n\n\t/**\n\t * Delete the selected DataScript\n\t * @param dataItem\n\t */\n\tprotected onDeleteDataScript(): void {\n\t\tthis.dataIngestionService.validateDeleteScript(this.dataScriptModel.id).subscribe(\n\t\t\t(result) => {\n\t\t\t\tif (result && result['canDelete']) {\n\t\t\t\t\tthis.prompt.open('Confirmation Required', 'Do you want to proceed?', 'Yes', 'No')\n\t\t\t\t\t\t.then((res) => {\n\t\t\t\t\t\t\tif (res) {\n\t\t\t\t\t\t\t\tthis.deleteDataScript();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tthis.prompt.open('Confirmation Required', 'There are Ingestion Batches that have used this DataScript. Deleting this will not delete the batches but will no longer reference a DataScript. Do you want to proceed?', 'Yes', 'No')\n\t\t\t\t\t\t.then((res) => {\n\t\t\t\t\t\t\tif (res) {\n\t\t\t\t\t\t\t\tthis.deleteDataScript();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\t(err) => console.log(err));\n\t}\n\n\t/**\n\t * Execute the Service to delete the DataScript\n\t */\n\tprivate deleteDataScript(): void {\n\t\tthis.dataIngestionService.deleteDataScript(this.dataScriptModel.id).subscribe(\n\t\t\t(result) => {\n\t\t\t\tthis.activeDialog.close(result);\n\t\t\t},\n\t\t\t(err) => console.log(err));\n\t}\n\n\t/**\n\t * Open the DataScript Designer\n\t */\n\tprotected onDataScriptDesigner(): void {\n\t\tthis.dialogService.extra(DataScriptEtlBuilderComponent,\n\t\t\t[UIDialogService,\n\t\t\t\t{\n\t\t\t\t\tprovide: DataScriptModel,\n\t\t\t\t\tuseValue: this.dataScriptModel}\n\t\t\t\t\t], false, false)\n\t\t\t.then((result) => {\n\t\t\t\tif (result.updated) {\n\t\t\t\t\tthis.etlScriptCode.updated = result.updated;\n\t\t\t\t\tthis.etlScriptCode.code = result.newEtlScriptCode;\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(error => console.log('Cancel datascript designer'));\n\t}\n}\n","// Angular\nimport {NgModule} from '@angular/core';\nimport {RouterModule, Routes} from '@angular/router';\n// Resolves\nimport {ModuleResolveService} from '../../shared/resolves/module.resolve.service';\nimport {DataScriptResolveService} from './resolve/data-script-resolve.service';\n// Services\nimport {DataScriptService} from './service/data-script.service';\nimport {AuthGuardService} from '../security/services/auth.guard.service';\n// Components\nimport {DataScriptListComponent} from './components/list/data-script-list.component';\n\nexport class DataScriptStates {\n\tpublic static readonly DATA_SCRIPT_LIST = {\n\t\turl: 'list'\n\t};\n}\n\nexport const DataScriptRoute: Routes = [\n\t{path: '', pathMatch: 'full', redirectTo: DataScriptStates.DATA_SCRIPT_LIST.url},\n\t{\n\t\tpath: DataScriptStates.DATA_SCRIPT_LIST.url,\n\t\tdata: {\n\t\t\tpage: {\n\t\t\t\ttitle: 'DATA_INGESTION.ETL_SCRIPTS',\n\t\t\t\tinstruction: '',\n\t\t\t\tmenu: ['DATA_INGESTION.PROJECT', 'DATA_INGESTION.ETL_SCRIPTS']\n\t\t\t},\n\t\t\trequiresAuth: true,\n\t\t},\n\t\tcomponent: DataScriptListComponent,\n\t\tresolve: {\n\t\t\tdataScripts: DataScriptResolveService\n\t\t},\n\t\tcanActivate: [AuthGuardService, ModuleResolveService]\n\t}\n];\n\n@NgModule({\n\texports: [RouterModule],\n\timports: [RouterModule.forChild(DataScriptRoute)]\n})\n\nexport class DataScriptRouteModule {\n}","// Angular\nimport {NgModule} from '@angular/core';\nimport {CommonModule} from '@angular/common';\nimport {FormsModule} from '@angular/forms';\nimport {HTTP_INTERCEPTORS, HttpClientModule} from '@angular/common/http';\n// Shared\nimport {SharedModule} from '../../shared/shared.module';\n// Route Module\nimport {DataScriptRouteModule} from './data-script-routing.states';\n// Kendo\nimport {DropDownsModule} from '@progress/kendo-angular-dropdowns';\nimport {GridModule} from '@progress/kendo-angular-grid';\nimport {DateInputsModule} from '@progress/kendo-angular-dateinputs';\nimport {SortableModule} from '@progress/kendo-angular-sortable';\nimport {PopupModule} from '@progress/kendo-angular-popup';\nimport {InputsModule} from '@progress/kendo-angular-inputs';\nimport {LayoutModule} from '@progress/kendo-angular-layout';\nimport {NumericTextBoxModule} from '@progress/kendo-angular-inputs';\n// Components\nimport {DataScriptListComponent} from './components/list/data-script-list.component';\nimport {DataScriptViewEditComponent} from './components/view-edit/data-script-view-edit.component';\nimport {DataScriptConsoleComponent} from './components/console/data-script-console.component';\nimport {DataScriptEtlBuilderComponent} from './components/etl-builder/data-script-etl-builder.component';\nimport {DataScriptSampleDataComponent} from './components/sample-data/data-script-sample-data.component';\nimport {AssetExplorerModule} from '../assetExplorer/asset-explorer.module';\n// Resolves\nimport {ModuleResolveService} from '../../shared/resolves/module.resolve.service';\nimport {DataScriptResolveService} from './resolve/data-script-resolve.service';\n// Services\nimport {DataScriptService} from './service/data-script.service';\nimport {UploadModule} from '@progress/kendo-angular-upload';\nimport {KendoFileUploadInterceptor} from '../../shared/providers/kendo-file-upload.interceptor';\nimport {ImportAssetsService} from '../importBatch/service/import-assets.service';\n\n@NgModule({\n\timports: [\n\t\t// Angular\n\t\tCommonModule,\n\t\tSharedModule,\n\t\tFormsModule,\n\t\t// TODO: Only for Kendo Upload at this point\n\t\tHttpClientModule,\n\t\t// Kendo\n\t\tDropDownsModule,\n\t\tGridModule,\n\t\tDateInputsModule,\n\t\tSortableModule,\n\t\tPopupModule,\n\t\tNumericTextBoxModule,\n\t\tHttpClientModule,\n\t\tUploadModule,\n\t\tInputsModule,\n\t\tLayoutModule,\n\t\tAssetExplorerModule, // So we can use Shared components that belongs to this module\n\t\t// Route\n\t\tDataScriptRouteModule\n\t],\n\tdeclarations: [\n\t\tDataScriptListComponent,\n\t\tDataScriptViewEditComponent,\n\t\tDataScriptConsoleComponent,\n\t\tDataScriptEtlBuilderComponent,\n\t\tDataScriptSampleDataComponent\n\t],\n\tproviders: [\n\t\t// Resolve\n\t\tModuleResolveService,\n\t\tDataScriptResolveService,\n\t\t// Service\n\t\tDataScriptService,\n\t\tImportAssetsService,\n\t\t{\n\t\t\tprovide: HTTP_INTERCEPTORS,\n\t\t\tuseClass: KendoFileUploadInterceptor,\n\t\t\tmulti: true\n\t\t}\n\t],\n\texports: [\n\t\tDataScriptListComponent,\n\t\tDataScriptViewEditComponent\n\t],\n\tentryComponents: [\n\t\tDataScriptViewEditComponent,\n\t\tDataScriptConsoleComponent,\n\t\tDataScriptEtlBuilderComponent,\n\t\tDataScriptSampleDataComponent\n\t]\n})\n\nexport class DataScriptModule {\n}","export class ScriptTestResultModel {\n\tconsoleLog: string;\n\tisValid: boolean;\n\terror?: string;\n\tdomains: Array<any> = []; // this contains {domain, fields(columns, data(rows)}\n\n\tconstructor() {\n\t\tthis.consoleLog = null;\n\t\tthis.isValid = false;\n\t\tthis.domains = [];\n\t}\n}\n\nexport class ScriptValidSyntaxResultModel {\n\terrors: Array <{\n\t\t\tendColumn: number,\n\t\t\tendLine: number,\n\t\t\tfatal: boolean,\n\t\t\tmessage: string,\n\t\t\tstartColumn: number,\n\t\t\tstartLine: number\n\t\t}>;\n\tvalidSyntax: boolean;\n\n\tconstructor() {\n\t\tthis.validSyntax = false;\n\t}\n}\n\nexport class ScriptConsoleSettingsModel {\n\ttop: number;\n\tleft: number;\n\theight: number;\n\twidth: number;\n\tscriptTestResult: ScriptTestResultModel;\n\n\tconstructor() {\n\t\tthis.top = 30;\n\t\tthis.left = 30;\n\t\tthis.height = 500;\n\t\tthis.width = 600;\n\t\tthis.scriptTestResult = new ScriptTestResultModel();\n\t};\n}","// Angular\nimport {Injectable} from '@angular/core';\nimport {Router, Resolve, ActivatedRouteSnapshot} from '@angular/router';\n// Services\nimport {DataScriptService} from '../service/data-script.service';\n// Others\nimport {Observable} from 'rxjs';\n\n@Injectable()\nexport class DataScriptResolveService implements Resolve<any> {\n\tconstructor(private dataScriptService: DataScriptService, private router: Router) {\n\t}\n\n\t/**\n\t * Get the List of API Actions\n\t * @param route\n\t */\n\tresolve(route: ActivatedRouteSnapshot): Observable<any> | boolean {\n\t\treturn this.dataScriptService.getDataScripts().map(dataScripts => {\n\t\t\treturn dataScripts;\n\t\t}).catch((err) => {\n\t\t\tconsole.error('DataScriptResolveService:', 'An Error Occurred trying to fetch the DataScript List');\n\t\t\tthis.router.navigate(['/security/error']);\n\t\t\treturn Observable.of(false);\n\t\t});\n\t}\n}"],"sourceRoot":""}