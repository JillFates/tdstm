(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{1120:function(e,t,i){"use strict";i.r(t);var n,s,r,o=i(1),c=i(0),a=i(10),l=i(15),u=i(200),p=i(65),h=i(269),d=i(46),f=(i(148),i(147),i(327)),m=i(24),y=function(){function e(e){this.http=e,this.licenseUrl="../ws/license"}return e.prototype.getLicenses=function(){return this.http.get(""+this.licenseUrl).map(function(e){var t=e.json(),i=t&&"success"===t.status&&t.data;return i.forEach(function(e){e.activationDate=e.activationDate?new Date(e.activationDate):"",e.expirationDate=e.expirationDate?new Date(e.expirationDate):""}),i}).catch(function(e){return e.json()})},e.prototype.getLicense=function(e){return this.http.get(this.licenseUrl+"/"+e).map(function(e){var t=e.json();return t&&"success"===t.status&&t.data}).catch(function(e){return e.json()})},e.prototype.applyKey=function(e,t){return this.http.post(this.licenseUrl+"/"+e+"/load",JSON.stringify({hash:t})).map(function(e){var t=e.json();return t&&"success"===t.status&&t.data}).catch(function(e){return e.json()})},e.prototype.resubmitLicenseRequest=function(e){return this.http.post(this.licenseUrl+"/"+e+"/email/request",null).map(function(e){var t=e.json();return t&&"success"===t.status&&t.data}).catch(function(e){return e.json()})},e.prototype.getEmailContent=function(e){return this.http.get(this.licenseUrl+"/"+e+"/email/request").map(function(e){var t=e.json();return t&&"success"===t.status&&t.data}).catch(function(e){return e.json()})},e.prototype.getEnvironments=function(){return this.http.get(this.licenseUrl+"/environment").map(function(e){var t=e.json();return t&&"success"===t.status&&t.data}).catch(function(e){return e.json()})},e.prototype.getProjects=function(){return this.http.get(this.licenseUrl+"/project").map(function(e){var t=e.json();return t&&"success"===t.status&&t.data}).catch(function(e){return e.json()})},e.prototype.deleteLicense=function(e){return this.http.delete(this.licenseUrl+"/"+e).map(function(e){var t=e.json();return t&&"success"===t.status&&t.data}).catch(function(e){return e.json()})},e.prototype.createRequestLicense=function(e){var t={clientName:e.clientName,email:e.email,environment:e.environment,projectId:e.project.id,requestNote:e.specialInstruction};return this.http.post(this.licenseUrl+"/request",JSON.stringify(t)).map(function(e){var t=e.json();return t&&"success"===t.status&&t.data}).catch(function(e){return e.json()})},e.prototype.filterColumn=function(e,t){var i=t.filter||{logic:"and",filters:[]},n=Object(f.e)(i).filter(function(t){return t.field===e.property})[0];if(e.filter||(e.filter=""),"text"===e.type&&(n?(n=i.filters.find(function(t){return t.field===e.property})).value=e.filter:i.filters.push({field:e.property,operator:"contains",value:e.filter,ignoreCase:!0})),"date"===e.type){var s=m.a.getInitEndFromDate(e.filter),r=s.init,o=s.end;n&&(t.filter.filters=this.getFiltersExcluding(e.property,t)),i.filters.push({field:e.property,operator:"gte",value:r}),i.filters.push({field:e.property,operator:"lte",value:o})}return i},e.prototype.clearFilter=function(e,t){e.filter="",t.filter.filters=this.getFiltersExcluding(e.property,t)},e.prototype.getFiltersExcluding=function(e,t){return(t.filter&&t.filter.filters||[]).filter(function(t){return t.field!==e})},e=o.b([Object(c.B)(),o.d("design:paramtypes",[d.a])],e)}(),v=i(35),g=function(){function e(e,t){this.licenseAdminService=e,this.router=t}return e.prototype.resolve=function(e){var t=this;return this.licenseAdminService.getLicenses().map(function(e){return e}).catch(function(e){return console.error("LicensesResolveService:","An Error Occurred trying to fetch License List"),t.router.navigate(["/security/error"]),v.Observable.of(!1)})},e=o.b([Object(c.B)(),o.d("design:paramtypes",[y,p.c])],e)}(),b=i(270),S=i(38),D=i(67),L=function(){return function(e){this.columns=[{label:"Action",property:"action",type:"action",width:108,locked:!0},{label:"Client",property:"client.name",type:"text",width:160},{label:"Project",property:"project.name",type:"text",width:160},{label:"Contact Email",property:"email",type:"text",width:160},{label:"Status",property:"status",type:"text",width:160},{label:"Type",property:"type",type:"text",width:160},{label:"Method",property:"method.name",type:"text",width:160},{label:"Server/Tokens",property:"method.max",type:"text",width:160},{label:"Inception",property:"activationDate",type:"date",format:e,width:170},{label:"Expiration",property:"expirationDate",type:"date",format:e,width:170},{label:"Environment",property:"environment",type:"text",width:160}]}}(),E=function(){return function(){}}(),C=function(){return function(){}}();!function(e){e.MULTI_PROJECT="MULTI_PROJECT",e.SINGLE_PROJECT="SINGLE_PROJECT"}(n||(n={})),function(e){e.PENDING="PENDING",e.ACTIVE="ACTIVE"}(s||(s={})),function(e){e.ENGINEERING="ENGINEERING",e.TRAINING="TRAINING",e.DEMO="DEMO",e.PRODUCTION="PRODUCTION"}(r||(r={}));var O=[{name:"MAX_SERVERS",text:"Servers"},{name:"TOKEN",text:"Tokens"},{name:"CUSTOM",text:"Custom"}],j=function(){function e(e,t,i,n){this.promptService=e,this.activeDialog=t,this.prompt=i,this.licenseAdminService=n,this.requestLicense=new E,this.environmentList=[],this.projectList=[]}return e.prototype.onCreateRequestLicense=function(){var e=this;this.licenseAdminService.createRequestLicense(this.requestLicense).subscribe(function(t){e.activeDialog.close(e.requestLicense)})},e.prototype.ngOnInit=function(){var e=this;v.Observable.forkJoin(this.licenseAdminService.getEnvironments(),this.licenseAdminService.getProjects()).subscribe(function(t){e.environmentList=t[0],e.requestLicense.environment=e.environmentList[0],e.projectList=t[1],e.requestLicense.project=e.projectList[0],e.dataSignature=JSON.stringify(e.requestLicense)})},e.prototype.isDirty=function(){return this.dataSignature!==JSON.stringify(this.requestLicense)},e.prototype.onProjectSelect=function(e){this.requestLicense.clientName=e.client.name},e.prototype.cancelCloseDialog=function(){var e=this;this.isDirty()?this.promptService.open("Confirmation Required","You have changes that have not been saved. Do you want to continue and lose those changes?","Confirm","Cancel").then(function(t){t&&e.activeDialog.dismiss()}).catch(function(e){return console.log(e)}):this.activeDialog.dismiss()},e=o.b([Object(c.n)({selector:"tds-license-create",templateUrl:"../tds/web-app/app-js/modules/licenseAdmin/components/request/request-license.component.html",styles:["\n        .has-error, .has-error:focus {\n            border: 1px #f00 solid;\n        }\n\t"]}),o.d("design:paramtypes",[D.b,S.a,D.b,y])],e)}(),A=function(){function e(e,t,i){this.requestLicenseModel=e,this.promptService=t,this.activeDialog=i}return e.prototype.cancelCloseDialog=function(){this.activeDialog.dismiss()},e=o.b([Object(c.n)({selector:"tds-license-created",templateUrl:"../tds/web-app/app-js/modules/licenseAdmin/components/created-license/created-license.component.html"}),o.d("design:paramtypes",[E,D.b,S.a])],e)}(),I=i(55),N=i(75),w=(i(630),function(e){function t(t,i,n,s){var r=e.call(this,"#licenseApplyKey")||this;return r.licenseModel=t,r.notifierService=i,r.promptService=n,r.licenseAdminService=s,r.licenseKey="",r.dataSignature={},r.modalOptions={isFullScreen:!1,isResizable:!1},r.dataSignature=JSON.stringify(r.licenseKey),r}return o.c(t,e),t.prototype.cancelCloseDialog=function(e){var t=this;this.isDirty()?this.promptService.open("Confirmation Required","You have changes that have not been saved. Do you want to continue and lose those changes?","Confirm","Cancel").then(function(e){e&&t.dismiss()}).catch(function(e){return console.log(e)}):this.close()},t.prototype.applyKey=function(){var e=this;this.licenseAdminService.applyKey(this.licenseModel.id,this.licenseKey).subscribe(function(t){var i="",n=null;t?(n=N.b.INFO,i="License was successfully applied"):(i="License was not applied",n=N.b.WARNING),e.notifierService.broadcast({name:n,message:i}),e.close()})},t.prototype.isDirty=function(){return this.dataSignature!==JSON.stringify(this.licenseKey)},t=o.b([Object(c.n)({selector:"tds-license-apply-key",templateUrl:"../tds/web-app/app-js/modules/licenseAdmin/components/apply-key/apply-key.component.html"}),o.d("design:paramtypes",[C,I.a,D.b,y])],t)}(S.c)),R=i(54),T=function(e){function t(t,i,n,s){var r=e.call(this,"#licenseManualRequest")||this;return r.licenseModel=t,r.notifierService=i,r.promptService=n,r.licenseAdminService=s,r.licenseEmail={},r.modalOptions={isFullScreen:!1,isResizable:!1},r}return o.c(t,e),t.prototype.ngOnInit=function(){var e=this;this.licenseAdminService.getEmailContent(this.licenseModel.id).subscribe(function(t){e.licenseEmail=t})},t.prototype.cancelCloseDialog=function(e){this.dismiss()},t=o.b([Object(c.n)({selector:"tds-license-manual-request",templateUrl:"../tds/web-app/app-js/modules/licenseAdmin/components/manual-request/manual-request.component.html"}),o.d("design:paramtypes",[C,I.a,D.b,y])],t)}(S.c),M=function(){function e(e,t,i,n,r,o,c,a){this.licenseModel=e,this.promptService=t,this.activeDialog=i,this.prompt=n,this.licenseAdminService=r,this.preferenceService=o,this.dialogService=c,this.notifierService=a,this.environmentList=[],this.projectList=[],this.dateFormat=m.a.DEFAULT_FORMAT_DATE,this.methodOptions=O,this.licenseStatus=s}return e.prototype.ngOnInit=function(){var e=this;this.preferenceService.getUserDatePreferenceAsKendoFormat().subscribe(function(t){e.dateFormat=t}),this.licenseAdminService.getLicense(this.licenseModel.id).subscribe(function(t){e.licenseModel=t})},e.prototype.cancelCloseDialog=function(){this.activeDialog.dismiss()},e.prototype.applyLicenseKey=function(){this.dialogService.extra(w,[{provide:C,useValue:this.licenseModel}],!1,!1).then(function(e){}).catch(function(e){return console.log("Cancel Apply Key")})},e.prototype.manuallyRequest=function(){this.dialogService.extra(T,[{provide:C,useValue:this.licenseModel}],!1,!1).then(function(e){}).catch(function(e){return console.log("Cancel Manual Request")})},e.prototype.resubmitLicenseRequest=function(){var e=this;this.licenseAdminService.resubmitLicenseRequest(this.licenseModel.id).subscribe(function(t){var i="",n=null;t?(n=N.b.INFO,i="Request License was successfully"):(i="There was an error on the request",n=N.b.WARNING),e.notifierService.broadcast({name:n,message:i})},function(e){return console.log(e)})},e.prototype.onDelete=function(){var e=this;this.prompt.open("Confirmation Required","You are about to delete the license. Do you want to proceed?","Yes","No").then(function(t){t&&e.licenseAdminService.deleteLicense(e.licenseModel.id).subscribe(function(t){e.activeDialog.dismiss()},function(e){return console.log(e)})})},e=o.b([Object(c.n)({selector:"tds-license-detail",templateUrl:"../tds/web-app/app-js/modules/licenseAdmin/components/detail/license-detail.component.html"}),o.d("design:paramtypes",[C,D.b,S.a,D.b,y,R.c,S.b,I.a])],e)}(),q=i(77),x=i(903),U=i(28),k=i(42),F=function(){function e(e,t,i,o,c,a){this.dialogService=e,this.permissionService=t,this.licenseAdminService=i,this.preferenceService=o,this.prompt=c,this.route=a,this.state={sort:[{dir:"asc",field:"name"}],filter:{filters:[],logic:"and"}},this.skip=0,this.pageSize=U.l,this.defaultPageOptions=U.m,this.licenseColumnModel=null,this.COLUMN_MIN_WIDTH=x.b,this.actionType=x.a,this.dateFormat="",this.licenseType=n,this.licenseStatus=s,this.licenseEnvironment=r,this.resultSet=this.route.snapshot.data.licenses,this.gridData=Object(k.e)(this.resultSet,this.state)}return e.prototype.ngOnInit=function(){var e=this;this.preferenceService.getUserDatePreferenceAsKendoFormat().subscribe(function(t){e.dateFormat=t,e.licenseColumnModel=new L("{0:"+e.dateFormat+"}")})},e.prototype.filterChange=function(e){this.state.filter=e,this.gridData=Object(k.e)(this.resultSet,this.state)},e.prototype.sortChange=function(e){this.state.sort=e,this.gridData=Object(k.e)(this.resultSet,this.state)},e.prototype.onFilter=function(e){var t=this.licenseAdminService.filterColumn(e,this.state);this.filterChange(t)},e.prototype.clearValue=function(e){this.licenseAdminService.clearFilter(e,this.state),this.filterChange(this.state.filter)},e.prototype.cellClick=function(e){e.columnIndex>0&&this.openLicenseViewEdit(e.dataItem)},e.prototype.onClickTemplate=function(e){e.target&&e.target.parentNode&&e.target.parentNode.click()},e.prototype.onDelete=function(e){var t=this;this.prompt.open("Confirmation Required","You are about to delete the selected license. Do you want to proceed?","Yes","No").then(function(i){i&&t.licenseAdminService.deleteLicense(e.id).subscribe(function(e){t.reloadData()},function(e){return console.log(e)})})},e.prototype.onCreateLicense=function(){var e=this;this.dialogService.open(j,[]).then(function(t){setTimeout(function(){e.openCreatedLicenseDialog(t)},500),t&&e.reloadData()}).catch(function(e){console.log("Dismissed Dialog")})},e.prototype.openCreatedLicenseDialog=function(e){this.dialogService.open(A,[{provide:E,useValue:e}]).then(function(){console.log("Dismissed Dialog")}).catch(function(){console.log("Dismissed Dialog")})},e.prototype.reloadData=function(){var e=this;this.licenseAdminService.getLicenses().subscribe(function(t){e.resultSet=t,e.gridData=Object(k.e)(e.resultSet,e.state)},function(e){return console.log(e)})},e.prototype.openLicenseViewEdit=function(e){var t=this;this.dialogService.open(M,[{provide:C,useValue:e}],U.e.LG,!1).then(function(e){e&&e.id}).catch(function(e){t.reloadData(),console.log("Dismissed Dialog")})},e.prototype.pageChange=function(e){this.skip=e.skip,this.state.skip=this.skip,this.state.take=e.take||this.state.take,this.pageSize=this.state.take,this.gridData=Object(k.e)(this.resultSet,this.state)},e=o.b([Object(c.n)({selector:"tds-license-list",templateUrl:"../tds/web-app/app-js/modules/licenseAdmin/components/list/license-list.component.html"}),o.d("design:paramtypes",[S.b,q.a,y,R.c,D.b,p.a])],e)}(),P=function(){function e(){}return e.LICENSE_LIST={url:"list"},e}(),J=[{path:"",pathMatch:"full",redirectTo:P.LICENSE_LIST.url},{path:P.LICENSE_LIST.url,data:{page:{title:"LICENSE.ADMIN",instruction:"",menu:["GLOBAL.ADMIN","LICENSE.ADMIN"]},requiresAuth:!0},component:F,resolve:{licenses:g},canActivate:[b.a,h.a]}],G=function(){function e(){}return e=o.b([Object(c.J)({exports:[p.d],imports:[p.d.forChild(J)]})],e)}(),K=i(1129),V=i(1114),_=i(1111),Y=i(1116),W=i(1115);i.d(t,"LicenseAdminModule",function(){return z});var z=function(){function e(){}return e=o.b([Object(c.J)({imports:[a.b,u.a,l.c,K.a,V.a,_.a,Y.a,W.a,G],declarations:[F,j,A,M,w,T],providers:[h.a,g,y],exports:[F,j,A,M,w,T],entryComponents:[j,A,M,w,T]})],e)}()},903:function(e,t,i){"use strict";i.d(t,"b",function(){return r}),i.d(t,"c",function(){return o}),i.d(t,"e",function(){return c}),i.d(t,"a",function(){return n}),i.d(t,"d",function(){return s}),i.d(t,"f",function(){return a});var n,s,r=360,o=function(){return function(e){this.columns=[{label:"Action",property:"action",type:"action",width:108,locked:!0},{label:"Name",property:"name",type:"text",locked:!0},{label:"Provider",property:"provider.name",type:"text",width:220},{label:"Description",property:"description",type:"text"},{label:"Mode",property:"modeFormat",type:"text",width:200},{label:"Date Create",property:"dateCreated",type:"date",format:e,width:170},{label:"Last Modified",property:"lastUpdated",type:"date",format:e,width:170}]}}(),c=function(){return function(){}}();!function(e){e[e.VIEW=0]="VIEW",e[e.CREATE=1]="CREATE",e[e.EDIT=2]="EDIT"}(n||(n={})),function(e){e[e.IMPORT=0]="IMPORT",e[e.EXPORT=1]="EXPORT"}(s||(s={}));var a=function(){return function(e,t){this.gridHeight=23,this.columns=e,this.data=t}}()}}]);