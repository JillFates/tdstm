(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{1122:function(t,e,i){"use strict";i.r(e);var a=i(1),o=i(0),s=i(10),r=i(15),n=i(121),c=i(200),l=i(65),p=i(269),d=i(905),u=i(35),h=function(){function t(t,e){this.dataScriptService=t,this.router=e}return t.prototype.resolve=function(t){var e=this;return this.dataScriptService.getDataScripts().map(function(t){return t}).catch(function(t){return console.error("DataScriptResolveService:","An Error Occurred trying to fetch the DataScript List"),e.router.navigate(["/security/error"]),u.Observable.of(!1)})},t=a.b([Object(o.B)(),a.d("design:paramtypes",[d.a,l.c])],t)}(),S=i(270),m=i(42),f=i(38),g=i(77),v=i(67),y=i(903),b=i(13),D=(i(632),i(634),i(635),i(636),i(933)),I=(i(630),i(934)),T=i(55),w=i(75),C=i(913),E=i(915),O=i(28),F=function(t){function e(e,i,a,o){var s=t.call(this,"#loadSampleData")||this;return s.etlScriptModel=e,s.dataIngestionService=i,s.notifierService=a,s.importAssetsService=o,s.file=new E.a,s.originalFileName={temporary:null,fileUploaded:null},s.OPTIONS={FILE:"file",SERVICE:"service",CSV:"csv",selected:void 0,useFileFrom:void 0},s.csv={options:[{text:"Select a format",value:-1},{text:"csv",value:0},{text:"json",value:3}],selected:void 0,fileContent:"",filename:null,state:void 0},s.webService={options:[],selected:void 0,state:void 0,filename:null},s.autoETL=!1,s.assetClassOptions=[{text:"Select a class",value:-1},{text:"Application",value:0},{text:"Device",value:1}],s.assetClassSelected=s.assetClassOptions[0],s.apiActionOptions=[],s.onPageLoad(),s}return a.c(e,t),e.prototype.onPageLoad=function(){var t=this;this.file.uploadedFilename=null,this.csv.selected=this.csv.options[0],this.OPTIONS.selected=this.OPTIONS.FILE,this.importAssetsService.getManualOptions().subscribe(function(e){e.actions&&e.actions.length>0&&(t.webService.options=e.actions)})},e.prototype.onContinue=function(){var t={temporaryFileName:null,originalFileName:null};this.OPTIONS.useFileFrom===this.OPTIONS.CSV&&(t.temporaryFileName=this.csv.filename,t.originalFileName=this.csv.filename),this.OPTIONS.useFileFrom===this.OPTIONS.SERVICE&&(t.temporaryFileName=this.webService.filename,t.originalFileName=this.webService.filename),this.OPTIONS.useFileFrom===this.OPTIONS.FILE&&(t.temporaryFileName=this.file.uploadedFilename,t.originalFileName=this.originalFileName.fileUploaded),this.close(t)},e.prototype.validForm=function(){return!(this.OPTIONS.selected!==this.OPTIONS.CSV||!this.csv.filename)||(!(this.OPTIONS.selected!==this.OPTIONS.SERVICE||!this.webService.filename)||!(this.OPTIONS.selected!==this.OPTIONS.FILE||!this.file.uploadedFilename))},e.prototype.onUploadFileText=function(){var t=this;this.dataIngestionService.uploadETLScriptFileText(this.csv.fileContent,this.csv.selected.text).subscribe(function(e){"success"===e.status&&e.data.filename?(t.csv.filename=e.data.filename,t.csv.state="success",t.OPTIONS.useFileFrom=t.OPTIONS.CSV):t.csv.state="fail"})},e.prototype.onFetch=function(){var t=this;this.importAssetsService.postFetch(this.webService.selected).subscribe(function(e){"success"===e.status?(t.webService.state="success",t.webService.filename=e.data.filename,t.OPTIONS.useFileFrom=t.OPTIONS.SERVICE):(t.notifierService.broadcast({name:w.b.DANGER,message:e.errors[0]}),t.webService.state="fail")})},e.prototype.completeEventHandler=function(t){var e=t.response.body.data;if("delete"===e.operation)this.clearFilename();else{var i=e.filename;this.file.uploadedFilename=i,this.OPTIONS.useFileFrom=this.OPTIONS.FILE,this.originalFileName.fileUploaded=this.originalFileName.temporary}},e.prototype.onUploadFile=function(t){t.data={},t.data[O.k]=O.h,this.clearFilename(),this.originalFileName.temporary=t.files[0].name},e.prototype.clearFilename=function(t){this.file.uploadedFilename=null,this.OPTIONS.useFileFrom=null,this.originalFileName.temporary=null,this.originalFileName.fileUploaded=null},e.prototype.onRemoveFile=function(t){t.data={},t.data[O.B]=this.file.uploadedFilename},e.prototype.cancelCloseDialog=function(){this.dismiss()},a.b([Object(o.lb)("kendoUploadInstance"),a.d("design:type",I.a)],e.prototype,"kendoUploadInstance",void 0),e=a.b([Object(o.n)({selector:"data-script-sample-data",templateUrl:"../tds/web-app/app-js/modules/dataScript/components/sample-data/data-script-sample-data.component.html"}),a.e(0,Object(o.A)("etlScript")),a.d("design:paramtypes",[y.e,d.a,T.a,C.a])],e)}(f.c),N=function(){return function(){this.domains=[],this.consoleLog=null,this.isValid=!1,this.domains=[]}}(),R=function(){return function(){this.validSyntax=!1}}(),x=function(){return function(){this.top=30,this.left=30,this.height=500,this.width=600,this.scriptTestResult=new N}}(),M="#viewConsole",P=function(t){function e(e){var i=t.call(this,M)||this;return i.consoleSettings=e,i.isWindowMaximized=!1,i.initialWindowStyle=null,i.modalOptions={isFullScreen:!0,isResizable:!0},i}return a.c(e,t),e.prototype.ngAfterViewInit=function(){console.log("after view init")},e.prototype.cancelCloseDialog=function(){this.dismiss()},e.prototype.maximizeWindow=function(){this.isWindowMaximized=!0},e.prototype.restoreWindow=function(){this.isWindowMaximized=!1},e=a.b([Object(o.n)({selector:"data-script-console",templateUrl:"../tds/web-app/app-js/modules/dataScript/components/console/data-script-console.component.html"}),a.d("design:paramtypes",[x])],e)}(f.c),L=i(54),V=i(369),A=i(95),_=i(85),j=i(69),k=i(341),U=i(1101),W=i(271),z=i(159),G=i(597),q=i(371),H=function(t){function e(e,i,a,o,s,r,n,c){var l=t.call(this,"#etlBuilder")||this;return l.translatePipe=e,l.dialogService=i,l.dataScriptModel=a,l.dataIngestionService=o,l.importAssetsService=s,l.preferenceService=r,l.notifierService=n,l.promptService=c,l.collapsed={code:!0,sample:!1,transform:!1},l.isWindowMaximized=!1,l.initialWindowStyle=null,l.sampleDataModel=new y.f([],[]),l.operationStatus={save:void 0,test:new A.b,syntax:new A.b},l.consoleSettings=new x,l.scriptTestResult=new N,l.scriptValidSyntaxResult=new R,l.closeErrorsSection=!1,l.CHECK_ACTION=A.a,l.testScriptProgress={progressKey:null,currentProgress:0},l.OBJECT_OR_LIST_PIPE=k.b,l.FieldInfoType=z.a,l.script="",l.modalOptions={isFullScreen:!0,isResizable:!0,sizeNamePreference:L.b.DATA_SCRIPT_SIZE},l.loadETLScript(),l.fieldReferencePopupHelper=new G.a,l}return a.c(e,t),e.prototype.ngAfterViewInit=function(){var t=this;this.MESSAGE_FIELD_WILL_BE_INITIALIZED=this.translatePipe.transform("DATA_INGESTION.DATASCRIPT.DESIGNER.FIELD_WILL_BE_INITIALIZED"),this.preferenceService.getDataScriptDesignerSize().subscribe(function(e){e.width=e.width>=window.innerWidth-5?window.innerWidth:e.width,e.height=e.height>=window.innerHeight-5?window.innerHeight:e.height,t.isWindowMaximized=e.height===window.innerHeight&&e.width===window.innerWidth}),setTimeout(function(){t.collapsed.code=!1},300)},e.prototype.loadETLScript=function(){var t=this;this.dataIngestionService.getETLScript(this.dataScriptModel.id).subscribe(function(e){e.status===_.a.API_SUCCESS&&(t.dataScriptModel=e.data.dataScript,t.filename=t.dataScriptModel.sampleFilename,t.script=t.dataScriptModel.etlSourceCode?t.dataScriptModel.etlSourceCode.slice(0):"",t.filename&&t.filename.length>0&&t.extractSampleDataFromFile(t.dataScriptModel.originalSampleFilename))},function(t){return console.log(t)})},e.prototype.showSampleDataRefresh=function(){return!Object(U.a)(this.dataScriptModel.sampleFilename)&&this.dataScriptModel.sampleFilename.endsWith(".json")},e.prototype.onTestScript=function(){var t=this;this.clearLogVariables("test"),this.clearSyntaxErrors(),this.operationStatus.test.state=A.a.IN_PROGRESS,this.dataIngestionService.testScript(this.script,this.filename).subscribe(function(e){e.status===_.a.API_SUCCESS&&e.data.progressKey?(t.testScriptProgress.progressKey=e.data.progressKey,t.setProgressLoop()):t.operationStatus.test.state=A.a.INVALID},function(e){return t.operationStatus.test.state=A.a.INVALID})},e.prototype.setProgressLoop=function(){this.testScriptProgress.currentProgress=0,this.progressLoop()},e.prototype.progressLoop=function(){var t=this;this.dataIngestionService.getJobProgress(this.testScriptProgress.progressKey).subscribe(function(e){var i=e.data.percentComp;t.testScriptProgress.currentProgress=i,e.data.status===d.c?(t.scriptTestResult=new N,t.operationStatus.test.state=A.a.INVALID,t.scriptTestResult.isValid=!1,t.scriptTestResult.error=e.data.data.message,t.addSyntaxErrors([e.data.data.startLine-1])):100===i&&e.data.status===d.b?setTimeout(function(){t.clearSyntaxErrors();var i=e.data.detail;t.operationStatus.test.state=A.a.VALID,t.scriptTestResult=new N,t.scriptTestResult.isValid=!0,t.importAssetsService.getFileContent(i).subscribe(function(e){t.scriptTestResult.domains=e.domains,t.transformedDataGrids=[],t.scriptTestResult.domains.forEach(function(e,i){t.transformedDataGrids[i]=new W.a(e.data)}),t.scriptTestResult.consoleLog=e.consoleLog,t.consoleSettings.scriptTestResult=t.scriptTestResult,t.showSampleDataRefresh()&&t.reloadSampleData()})},500):setTimeout(function(){t.progressLoop()},2e3)})},e.prototype.onCheckScriptSyntax=function(){var t=this;this.clearSyntaxErrors(),this.clearLogVariables("syntax"),this.dataIngestionService.checkSyntax(this.script,this.filename).subscribe(function(e){t.scriptValidSyntaxResult=e.data,t.operationStatus.syntax.state=t.scriptValidSyntaxResult.validSyntax?A.a.VALID:A.a.INVALID;var i=t.scriptValidSyntaxResult.errors.map(function(t){return t.startLine-1});i.length>0?t.addSyntaxErrors(i):t.clearSyntaxErrors()})},e.prototype.cancelCloseDialog=function(t){var e=this;if(!(t&&t.target&&t.target.classList.contains(q.a.POPUP_ESC_TRIGGER_CLASS)))if(this.isScriptDirty())this.promptService.open("Confirmation Required","You have changes that have not been saved. Do you want to continue and lose those changes?","Confirm","Cancel").then(function(t){t&&e.dismiss()});else{var i={updated:"success"===this.operationStatus.save,newEtlScriptCode:this.script};this.close(i)}},e.prototype.onSave=function(){var t=this;this.operationStatus.save="progress",this.clearLogVariables(),this.dataIngestionService.saveScript(this.dataScriptModel.id,this.script).subscribe(function(e){e?(t.dataScriptModel.etlSourceCode=t.script.slice(0),t.operationStatus.save="success"):t.operationStatus.save="fail"},function(t){console.log(t)})},e.prototype.isScriptDirty=function(){return this.dataScriptModel&&this.dataScriptModel.etlSourceCode!==this.script},e.prototype.onScriptChange=function(t){this.operationStatus.save=void 0,this.operationStatus.syntax.value=t.newValue,this.operationStatus.test.value=t.newValue},e.prototype.toggleSection=function(t){this.collapsed[t]=!this.collapsed[t]},e.prototype.onLoadSampleData=function(){var t=this;this.dialogService.extra(F,[{provide:"etlScript",useValue:this.dataScriptModel}]).then(function(e){t.filename=e.temporaryFileName,t.extractSampleDataFromFile(e.originalFileName)}).catch(function(t){console.log("SampleDataDialog error occurred.."),t&&console.log(t)})},e.prototype.reloadSampleData=function(){this.extractSampleDataFromFile(this.dataScriptModel.originalSampleFilename)},e.prototype.extractSampleDataFromFile=function(t){var e=this;this.clearLogVariables("sampleData");var i=this.extractRootNode();this.dataIngestionService.getSampleData(this.dataScriptModel.id,this.filename,t,i).subscribe(function(t){e.sampleDataModel=t,e.sampleDataModel.data&&(e.sampleDataGridHelper=new W.a(e.sampleDataModel.data?e.sampleDataModel.data:[]),e.dataIngestionService.getETLScript(e.dataScriptModel.id).subscribe(function(t){t.status===_.a.API_SUCCESS&&(e.dataScriptModel.originalSampleFilename=t.data.dataScript.originalSampleFilename,e.dataScriptModel.sampleFilename=t.data.dataScript.sampleFilename)},function(t){return console.log(t)}))})},e.prototype.extractRootNode=function(){var t=this.script.match(/\s*rootNode\s*(?:"|')(.*)(?:"|').*/),e="";return null!==t&&null!==t[1]&&(e=t[1]),e},e.prototype.onViewConsole=function(){this.dialogService.extra(P,[{provide:x,useValue:this.consoleSettings}],!1,!0).then(function(t){}).catch(function(t){})},e.prototype.testHasErrors=function(){return!this.scriptTestResult.isValid&&this.scriptTestResult.error&&this.scriptTestResult.error.length>0},e.prototype.sampleDataHasErrors=function(){return this.sampleDataModel&&this.sampleDataModel.errors&&this.sampleDataModel.errors.length>0},e.prototype.syntaxHasErrors=function(){return!this.scriptValidSyntaxResult.validSyntax&&this.scriptValidSyntaxResult.errors&&this.scriptValidSyntaxResult.errors.length>0},e.prototype.closeErrors=function(){this.closeErrorsSection=!0},e.prototype.getSyntaxErrors=function(){return this.scriptValidSyntaxResult.errors.map(function(t){return"message: "+t.message+" --\x3e start line: "+t.startLine+", end line: "+t.endLine+", start column: "+t.startColumn+", endColumn: "+t.endColumn+", fatal: "+t.fatal}).join("\n")},e.prototype.clearLogVariables=function(t){this.closeErrorsSection=!1,"save"===t&&(this.scriptTestResult=new N,this.consoleSettings.scriptTestResult=new N,this.scriptValidSyntaxResult=new R),"test"===t&&(this.scriptTestResult=new N,this.consoleSettings.scriptTestResult=new N,this.scriptValidSyntaxResult=new R),"syntax"===t&&(this.scriptValidSyntaxResult=new R,this.scriptValidSyntaxResult=new R),"sampleData"===t&&(this.sampleDataModel=null)},e.prototype.isCheckSyntaxDisabled=function(){return!this.script||!this.filename},e.prototype.isTestDisabled=function(){return!this.script||!this.filename||this.operationStatus.test.state===A.a.IN_PROGRESS},e.prototype.maximizeWindow=function(){var t=this.resizableForm.nativeElement.style,e=t.width,i=t.height;this.initialWindowStyle={width:e,height:i},this.isWindowMaximized=!0},e.prototype.restoreWindow=function(){this.isWindowMaximized=!1},e.prototype.getInitOrValue=function(t){return t.value?t.value:t.init||""},e.prototype.clearSyntaxErrors=function(){this.codeMirrorComponent&&this.codeMirrorComponent.clearSyntaxErrors()},e.prototype.addSyntaxErrors=function(t){this.codeMirrorComponent&&this.codeMirrorComponent.addSyntaxErrors(t)},a.b([Object(o.lb)("codeMirror"),a.d("design:type",V.a)],e.prototype,"codeMirrorComponent",void 0),a.b([Object(o.lb)("resizableForm"),a.d("design:type",o.u)],e.prototype,"resizableForm",void 0),e=a.b([Object(o.n)({selector:"data-script-etl-builder",templateUrl:"../tds/web-app/app-js/modules/dataScript/components/etl-builder/data-script-etl-builder.component.html"}),a.d("design:paramtypes",[j.a,f.b,y.e,d.a,C.a,L.c,T.a,v.b])],e)}(f.c),B=function(){function t(t,e,i,o,s,r,n){this.originalModel=t,this.modalType=e,this.promptService=i,this.activeDialog=o,this.prompt=s,this.dataIngestionService=r,this.dialogService=n,this.providerList=new Array,this.dataScriptMode=y.d,this.actionTypes=y.a,this.isUnique=!0,this.datasourceName=new b.Subject,this.etlScriptCode={updated:!1,code:null},this.dataScriptModel=Object.assign({},this.originalModel),this.getProviders(),this.modalTitle=this.modalType===y.a.CREATE?"Create ETL Script":this.modalType===y.a.EDIT?"ETL Script Edit":"ETL Script Detail";var c=a.a({},this.dataScriptModel);this.etlScriptCode.code=c.etlSourceCode,delete c.etlSourceCode,this.dataSignature=JSON.stringify(c),this.datasourceName.next(this.dataScriptModel.name)}return t.prototype.getProviders=function(){var t=this;this.dataIngestionService.getProviders().subscribe(function(e){t.modalType===y.a.CREATE&&(t.providerList.push({id:0,name:"Select..."}),t.dataScriptModel.provider=t.providerList[0]),(i=t.providerList).push.apply(i,e);var i,o=a.a({},t.dataScriptModel);t.etlScriptCode.code=o.etlSourceCode,delete o.etlSourceCode,t.dataSignature=JSON.stringify(o),setTimeout(function(){t.dataScriptProvider&&t.dataScriptProvider.focus()},500)},function(t){return console.log(t)})},t.prototype.onSaveDataScript=function(){var t=this;this.dataScriptModel.etlSourceCode=this.etlScriptCode.code,this.dataIngestionService.saveDataScript(this.dataScriptModel).subscribe(function(e){t.activeDialog.close(e)},function(t){return console.log(t)})},t.prototype.ngOnInit=function(){var t=this;this.datasourceName.debounceTime(800).distinctUntilChanged().filter(function(t){return Boolean(t&&t.trim())}).flatMap(function(){return t.dataIngestionService.validateUniquenessDataScriptByName(t.dataScriptModel)}).subscribe(function(e){return t.isUnique=e},function(t){return console.log(t.message)})},t.prototype.onValidateUniqueness=function(){this.datasourceName.next(this.dataScriptModel.name)},t.prototype.handleKeyboardEvent=function(t){t&&t.code===O.p.ESCAPE&&this.cancelCloseDialog()},t.prototype.isDirty=function(){var t=a.a({},this.dataScriptModel);return this.etlScriptCode.code=t.etlSourceCode,delete t.etlSourceCode,this.dataSignature!==JSON.stringify(t)},t.prototype.focusForm=function(){this.dataScriptContainer.nativeElement.focus()},t.prototype.cancelCloseDialog=function(){var t=this;this.isDirty()?this.promptService.open("Confirmation Required","You have changes that have not been saved. Do you want to continue and lose those changes?","Confirm","Cancel").then(function(e){e?t.activeDialog.dismiss():t.focusForm()}).catch(function(t){return console.log(t)}):this.etlScriptCode.updated?this.activeDialog.close():this.activeDialog.dismiss()},t.prototype.changeToEditDataScript=function(){this.modalType=this.actionTypes.EDIT,this.modalTitle="ETL Script Edit",this.focusForm()},t.prototype.onDeleteDataScript=function(){var t=this;this.dataIngestionService.validateDeleteScript(this.dataScriptModel.id).subscribe(function(e){e&&e.canDelete?t.prompt.open("Confirmation Required","Do you want to proceed?","Yes","No").then(function(e){e&&t.deleteDataScript()}):t.prompt.open("Confirmation Required","There are Ingestion Batches that have used this DataScript. Deleting this will not delete the batches but will no longer reference a DataScript. Do you want to proceed?","Yes","No").then(function(e){e&&t.deleteDataScript()})},function(t){return console.log(t)})},t.prototype.deleteDataScript=function(){var t=this;this.dataIngestionService.deleteDataScript(this.dataScriptModel.id).subscribe(function(e){t.activeDialog.close(e)},function(t){return console.log(t)})},t.prototype.onDataScriptDesigner=function(){var t=this;this.dialogService.extra(H,[f.b,{provide:y.e,useValue:this.dataScriptModel}],!1,!1).then(function(e){e.updated&&(t.etlScriptCode.updated=e.updated,t.etlScriptCode.code=e.newEtlScriptCode)}).catch(function(t){return console.log("Cancel datascript designer")})},a.b([Object(o.lb)("dataScriptProvider",{read:D.a}),a.d("design:type",D.a)],t.prototype,"dataScriptProvider",void 0),a.b([Object(o.lb)("dataScriptContainer"),a.d("design:type",o.u)],t.prototype,"dataScriptContainer",void 0),a.b([Object(o.z)("keydown",["$event"]),a.d("design:type",Function),a.d("design:paramtypes",[KeyboardEvent]),a.d("design:returntype",void 0)],t.prototype,"handleKeyboardEvent",null),t=a.b([Object(o.n)({selector:"data-script-view-edit",templateUrl:"../tds/web-app/app-js/modules/dataScript/components/view-edit/data-script-view-edit.component.html",styles:["\n        .has-error, .has-error:focus {\n            border: 1px #f00 solid;\n        }\n\t"]}),a.d("design:paramtypes",[y.e,Number,v.b,f.a,v.b,d.a,f.b])],t)}(),J=function(){function t(t,e,i,a,o,s){var r=this;this.route=t,this.dialogService=e,this.permissionService=i,this.dataIngestionService=a,this.prompt=o,this.preferenceService=s,this.state={sort:[{dir:"asc",field:"name"}],filter:{filters:[],logic:"and"}},this.pageSize=O.l,this.skip=0,this.defaultPageOptions=O.m,this.dataScriptColumnModel=null,this.COLUMN_MIN_WIDTH=y.b,this.actionType=y.a,this.selectedRows=[],this.isRowSelected=function(t){return r.selectedRows.indexOf(t.dataItem.id)>=0},this.dateFormat="",this.state.take=this.pageSize,this.state.skip=this.skip,this.setDataGrid(this.route.snapshot.data.dataScripts)}return t.prototype.setDataGrid=function(t){this.resultSet=t,this.resultSet.forEach(function(t){t.modeFormat=t.mode?"Export":"Import"}),this.gridData=Object(m.e)(this.resultSet,this.state)},t.prototype.ngOnInit=function(){var t=this;this.preferenceService.getUserDatePreferenceAsKendoFormat().subscribe(function(e){t.dateFormat=e,t.dataScriptColumnModel=new y.c("{0:"+e+"}")})},t.prototype.filterChange=function(t){this.state.filter=t,this.gridData=Object(m.e)(this.resultSet,this.state)},t.prototype.sortChange=function(t){this.state.sort=t,this.gridData=Object(m.e)(this.resultSet,this.state)},t.prototype.onFilter=function(t){var e=this.dataIngestionService.filterColumn(t,this.state);this.filterChange(e)},t.prototype.clearValue=function(t){this.dataIngestionService.clearFilter(t,this.state),this.filterChange(this.state.filter)},t.prototype.onCreateDataScript=function(){var t={name:"",description:"",mode:y.d.IMPORT,provider:{id:null,name:""}};this.openDataScriptDialogViewEdit(t,y.a.CREATE)},t.prototype.onEditDataScript=function(t){this.openDataScriptDialogViewEdit(t,y.a.EDIT)},t.prototype.onDeleteDataScript=function(t){var e=this;this.dataIngestionService.validateDeleteScript(t.id).subscribe(function(i){i&&i.canDelete?e.prompt.open("Confirmation Required","Do you want to proceed?","Yes","No").then(function(i){i&&e.deleteDataScript(t)}):e.prompt.open("Confirmation Required","There are Ingestion Batches that have used this DataScript. Deleting this will not delete the batches but will no longer reference a DataScript. Do you want to proceed?","Yes","No").then(function(i){i&&e.deleteDataScript(t)})},function(t){return console.log(t)})},t.prototype.deleteDataScript=function(t){var e=this;this.dataIngestionService.deleteDataScript(t.id).subscribe(function(t){e.reloadDataScripts()},function(t){return console.log(t)})},t.prototype.cellClick=function(t){t.columnIndex>0&&(this.selectRow(t.dataItem.id),this.openDataScriptDialogViewEdit(t.dataItem,y.a.VIEW))},t.prototype.reloadDataScripts=function(){var t=this;this.dataIngestionService.getDataScripts().subscribe(function(e){t.setDataGrid(e)},function(t){return console.log(t)})},t.prototype.openDataScriptDialogViewEdit=function(t,e){var i=this;this.dialogService.open(B,[{provide:y.e,useValue:t},{provide:Number,useValue:e}]).then(function(t){i.reloadDataScripts(),e===y.a.CREATE&&setTimeout(function(){i.selectRow(t.dataScript.id),i.openDataScriptDialogViewEdit(t.dataScript,y.a.VIEW)},500)}).catch(function(t){})},t.prototype.selectRow=function(t){this.selectedRows=[],this.selectedRows.push(t)},t.prototype.onClickTemplate=function(t){t.target&&t.target.parentNode&&t.target.parentNode.click()},t.prototype.pageChange=function(t){this.skip=t.skip,this.state.skip=this.skip,this.state.take=t.take||this.state.take,this.pageSize=this.state.take,this.gridData=Object(m.e)(this.resultSet,this.state)},t=a.b([Object(o.n)({selector:"data-script-list",templateUrl:"../tds/web-app/app-js/modules/dataScript/components/list/data-script-list.component.html",styles:["\n\t\t#btnCreateDataScript { margin-left: 16px; }\n\t\t.action-header { width:100%; text-align:center; }\n\t"]}),a.d("design:paramtypes",[l.a,f.b,g.a,d.a,v.b,L.c])],t)}(),K=function(){function t(){}return t.DATA_SCRIPT_LIST={url:"list"},t}(),Y=[{path:"",pathMatch:"full",redirectTo:K.DATA_SCRIPT_LIST.url},{path:K.DATA_SCRIPT_LIST.url,data:{page:{title:"DATA_INGESTION.ETL_SCRIPTS",instruction:"",menu:["DATA_INGESTION.PROJECT","DATA_INGESTION.ETL_SCRIPTS"]},requiresAuth:!0},component:J,resolve:{dataScripts:h},canActivate:[S.a,p.a]}],Z=function(){function t(){}return t=a.b([Object(o.J)({exports:[l.d],imports:[l.d.forChild(Y)]})],t)}(),$=i(1129),Q=i(1114),X=i(1115),tt=i(1132),et=i(1111),it=i(1116),at=i(1117),ot=i(1103),st=i(382),rt=i(1118);i.d(e,"DataScriptModule",function(){return nt});var nt=function(){function t(){}return t=a.b([Object(o.J)({imports:[s.b,c.a,r.c,n.c,$.a,Q.a,X.a,tt.a,et.a,ot.a,n.c,rt.a,it.a,at.a,st.AssetExplorerModule,Z],declarations:[J,B,P,H,F],providers:[p.a,h,d.a,C.a,{provide:n.a,useClass:E.b,multi:!0}],exports:[J,B],entryComponents:[B,P,H,F]})],t)}()}}]);