<header
	class="main-header header-component"
	*ngIf="!pageMetaData.hideTopNav || !userContext"
>
	<nav class="navbar navbar-static-top">
		<div
			class="container menu-top-container"
			[ngClass]="{
				'menu-top-container-full-menu':
					userContext.licenseInfo &&
					!userContext.licenseInfo.license.isManager
			}"
		>
			<div class="navbar-header branding">
				<button
					type="button"
					class="navbar-toggle collapsed"
					data-toggle="collapse"
					data-target="#navbar-collapse"
				>
					<i class="fa fa-bars"></i>
				</button>
				<img
					[src]="userContext.project.logoUrl"
					alt="Transition Manager Logo"
				/>
			</div>

			<!-- <div class="navbar-header">
				<button
					type="button"
					class="navbar-toggle collapsed"
					data-toggle="collapse"
					data-target="#navbar-collapse"
				>
					<i class="fa fa-bars"></i>
				</button>
				<img
					
					[src]="userContext.project.logoUrl"
					alt="Transition Manager"
					border="0"
				/>
			</div>
 -->
			<tds-tranman-menu></tds-tranman-menu>

			<!-- Navbar Right Menu -->
			<div class="navbar-custom-menu user-navarea">
				<ul class="nav navbar-nav">
					<li class="dropdown search-menu">
						<a
							href="#"
							class="nav-link nav-icon dropdown-toggle"
							data-toggle="dropdown"
						>
							<clr-icon shape="search"></clr-icon>
						</a>
						<ul class="dropdown-menu search-dialog-dropdown-menu">
							<li class="search-body">
								<form
									clrForm
									[formGroup]="searchForm"
									clrLayout="vertical"
									class="is-fullwidth"
								>
									<clr-input-container class="clr-col-12">
										<input
											clrInput
											type="text"
											formControlName="search"
											placeholder="Search"
										/>
									</clr-input-container>
								</form>
							</li>
						</ul>
					</li>
					<!-- Notifications Menu -->
					<li class="dropdown notifications-menu">
						<!-- Menu toggle button -->
						<a
							href="#"
							id="nav-project-name"
							class="dropdown-toggle"
							data-toggle="dropdown"
						>
							<span *ngIf="userContext.project">{{
								userContext.project.name
							}}</span>
							<span *ngIf="userContext.event">
								: {{ userContext.event.name }}</span
							>
							<span *ngIf="userContext.bundle">
								: {{ userContext.bundle.name }}</span
							>
						</a>
					</li>
					<li
						*ngIf="
							!userContext.licenseInfo.license.isManager &&
							!userContext.licenseInfo.license.isValid
						"
					>
						<tds-license-warning></tds-license-warning>
					</li>
					<!-- User Account Menu -->
					<li class="dropdown user user-menu">
						<!-- Menu Toggle Button -->
						<a
							href="#"
							class="dropdown-toggle"
							data-toggle="dropdown"
							[title]="userContext.person.fullName"
						>
							<span class="user-name">{{
								getUserIconText()
							}}</span>
						</a>
						<ul class="dropdown-menu user-dialog-dropdown-menu">
							<!-- Menu Body -->
							<li class="user-body">
								<ul class="list-group">
									<li class="list-group-item">
										<a
											(click)="openEditPersonModal()"
											style="cursor: pointer;"
											><span
												class="glyphicon glyphicon-user user-menu-icon-badge"
											></span>
											Account Details</a
										>
									</li>
									<li class="list-group-item">
										<a
											(click)="openDateTimezoneModal()"
											style="cursor: pointer;"
											><span
												class="glyphicon glyphicon-time user-menu-icon-badge"
											></span>
											Date and Timezone</a
										>
									</li>
									<li class="list-group-item">
										<a
											(click)="openPrefModal()"
											style="cursor: pointer;"
											><span
												class="glyphicon glyphicon-pencil user-menu-icon-badge"
											></span>
											Edit Preferences</a
										>
									</li>
								</ul>
							</li>
							<!-- Menu Footer-->
							<li class="user-footer">
								<div class="pull-right">
									<a
										(click)="logOut()"
										class="btn btn-default btn-flat"
										><span
											class="glyphicon glyphicon-log-out user-menu-icon-badge"
										></span>
										Sign Out</a
									>
								</div>
							</li>
						</ul>
					</li>
				</ul>
			</div>
			<!-- /.navbar-custom-menu -->
		</div>
		<!-- /.container-fluid -->
	</nav>
</header>
