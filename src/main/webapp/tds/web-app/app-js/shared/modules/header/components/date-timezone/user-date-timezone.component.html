<div tds-autofocus tds-handle-escape (escPressed)="cancelCloseDialog()" id="datetime-modal" class="modal fade in datetime-modal-component">
    <div class="modal-dialog modal-lg" role="document">
        <div class="tds-modal-content" tds-ui-modal-decorator="">
            <div class="modal-header">
                <button (click)="cancelCloseDialog()" type="button" class="close" aria-label="Close"><clr-icon aria-hidden="true" shape="close"></clr-icon></button>
                <h4 *ngIf="!shouldReturnData" class="modal-title">{{ 'GLOBAL.DATE_TIMEZONE' | translate }}</h4>
                <h4 *ngIf="shouldReturnData" class="modal-title">{{ 'GLOBAL.TIMEZONE' | translate }}</h4>
            </div>
            <div class="modal-body">
                <form id="userTimezoneForm">
                    <div style="padding: 5px">
                        <b>Time Zone:</b>
                        <kendo-dropdownlist
                                id="dateTimezone"
                                name="timezone"
                                [(ngModel)]="selectedTimezone"
                                [data]="timezonesList"
                                [textField]="'label'"
                                [valueField]="'code'"
                                (valueChange)="onTimezoneSelected($event)">
                        </kendo-dropdownlist>
                        <b *ngIf="!shouldReturnData" style="padding-left: 30px">{{ 'GLOBAL.DATE_FORMAT' | translate }}:</b>
                        <kendo-dropdownlist
                                *ngIf="!shouldReturnData"
                                id="dateTimeFormat"
                                name="dateTimeFormat"
                                [(ngModel)]="selectedTimeFormat"
                                [data]="timeFormatList">
                        </kendo-dropdownlist>
                    </div>

                    <map name="timezoneMap" id="timezoneMap">
                        <div *ngFor="let area of mapAreaList">
                            <area *ngFor="let poly of area.polys"
                                  [attr.data-timezone]="area['name']"
                                  [attr.data-country]="area['country']"
                                  [attr.data-pin]="area['pin']?.join(',')"
                                  [attr.data-offset]="area['offset']"
                                  shape="poly"
                                  coords="{{poly?.join(',')}}"
                            />
                            <area *ngFor="let rect of area.rects"
                                  [attr.data-timezone]="area['name']"
                                  [attr.data-country]="area['country']"
                                  [attr.data-pin]="area['pin']?.join(',')"
                                  [attr.data-offset]="area['offset']"
                                  shape="rect"
                                  coords="{{rect?.join(',')}}"
                            />
                        </div>
                    </map>

                    <img id="timezoneImage" src="/tdstm/assets/images/world_map_800.jpg" width="800" height="400" usemap="#timezoneMap"/>
                    <img class="timezone-pin" src="/tdstm/assets/images/pin.png" style="padding-top: 4px;" [ngClass]="{'timezone-pin-hidden': !timezonePinShow}" />

                </form>

                <div class="modal-footer form-group-center">
					<tds-button theme="primary" (click)="onSave()" icon="floppy">{{ 'GLOBAL.SAVE' | translate }}</tds-button>
					<tds-button (click)="cancelCloseDialog()" icon="ban">{{'GLOBAL.CLOSE' | translate }}</tds-button>
                </div>
            </div>
        </div>
    </div>
</div>
