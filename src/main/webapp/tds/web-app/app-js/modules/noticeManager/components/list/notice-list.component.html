<!-- Main content -->
<div class="content body tds-kendo-grid notice-list-component">
    <section>
        <div *ngIf="noticeColumnModel">
            <div class="box-body box-with-empty-header">
                <kendo-grid
                    *ngIf="gridSettings"
                    [data]="gridSettings.gridData"
                    [filter]="gridSettings.state.filter"
                    [filterable]="true"
                    (filterChange)="gridSettings.filterChange($event)"
                    [sort]="gridSettings.state.sort"
                    [sortable]="{mode:'single'}"
                    [pageSize]="gridSettings.state.take"
                    [skip]="gridSettings.state.skip"
                    [pageable]="{pageSizes: gridSettings.defaultPageOptions, info: true}"
                    (pageChange)="gridSettings.pageChange($event)"
                    [resizable]="true"
                    (sortChange)="gridSettings.sortChange($event)"
                    (cellClick)="cellClick($event)"
                    [selectable]="true">
                    <ng-template kendoGridToolbarTemplate [position]="'top'">
                        <!--{{ 'NOTICE.CREATE_NOTICE' | translate }}-->
                        <tds-button-create
                                [disabled]="!isCreateAvailable()"
                                class="button-create-notice"
                                title="{{ 'NOTICE.CREATE_NOTICE' | translate }}"
                                (click)="onCreateNotice()">
                        </tds-button-create>
                        <tds-button-custom
                                icon="refresh"
                                title="Refresh"
                                isIconButton="true"
                                class="component-action-reload pull-right"
                                (click)="reloadData()">
                        </tds-button-custom>
                    </ng-template>

                    <!-- Action -->
                    <kendo-grid-command-column [width]="52" [class]="{'k-custom-command-column': true}" [locked]="true">
                        <ng-template kendoGridHeaderTemplate>
                            <div class="text-center">
                                <label class="action-header"> {{ 'GLOBAL.ACTION' | translate }} </label>
                            </div>
                        </ng-template>
                        <ng-template kendoGridCellTemplate
                                     let-dataItem>
                            <div class="tds-action-button-set">
                                <tds-button-edit (click)="openNotice(dataItem, actionType.Edit)" [disabled]="!isEditAvailable()">
                                </tds-button-edit>
                                <tds-button-delete (click)="onDelete(dataItem)">
                                </tds-button-delete>
                            </div>
                        </ng-template>
                    </kendo-grid-command-column>

                    <kendo-grid-column *ngFor="let column of noticeColumnModel.columns" field="{{column.property}}" format="{{column.format}}" [locked]="column.locked" [width]="!column.width ? COLUMN_MIN_WIDTH : column.width">
                        <ng-template kendoGridHeaderTemplate>
                            <div class="sortable-column" (click)="onClickTemplate($event)">
                                <label [ngClass]="{'action-header': column.type === 'action'}"> {{column.label}}</label>
                            </div>
                        </ng-template>

                        <ng-template kendoGridFilterCellTemplate let-filter>
                            <div class="has-feedback" *ngIf="column.property && column.type !== 'action'" style="margin-bottom:0px;">
                                <div *ngIf="column.type === 'date'">
                                    <kendo-datepicker [format]="dateFormat" 
                                        [(ngModel)]="column.filter" 
                                        (valueChange)="gridSettings.onFilter(column)" [style.width.%]="100"></kendo-datepicker>
									<span *ngIf="column.filter" (click)="gridSettings.clearFilter(column)" style="right:15%;cursor:pointer;color:#656565;pointer-events:all" class="fa fa-times form-control-feedback" aria-hidden="true"></span>
                                </div>

                                <div *ngIf="(column.type === 'text' || column.type === 'number') && column.property !== 'typeId' && column.property !== 'active'">
                                    <input type="text" (keyup)="gridSettings.onFilter(column)" class="form-control" name="{{column.property}}" [(ngModel)]="column.filter" placeholder="Filter {{column.label}}" value="">
                                    <span *ngIf="column.filter" (click)="gridSettings.clearValue(column)" style="cursor:pointer;color:#656565;pointer-events:all" class="fa fa-times form-control-feedback" aria-hidden="true"></span>
                                </div>

                                <div *ngIf="column.type === 'boolean'">
                                        <kendo-dropdownlist
                                            [data]="yesNoList"
                                            [textField]="'name'"
                                            [valueField]="'value'"
                                            [valuePrimitive]="true"
                                            [(ngModel)]="column.filter"
                                            [defaultItem]="defaultYesNoList"
                                            (valueChange)="gridSettings.onFilter(column)"
                                            class="form-control">
                                        </kendo-dropdownlist>

                                        <span *ngIf="column.filter == true || column.filter == false" 
                                            (click)="resetBooleanFilter(column)" 
                                            style="cursor:pointer;color:#656565;pointer-events:all;margin-right: 15px;" 
                                            class="fa fa-times form-control-feedback" 
                                            aria-hidden="true">
                                        </span>
                                </div>



                                <div *ngIf="column.property === 'typeId'">
                                    <kendo-dropdownlist
                                        [data]="noticeTypes"
                                        [textField]="'name'"
                                        [valueField]="'typeId'"
                                        [valuePrimitive]="true"
                                        [(ngModel)]="column.filter"
                                        [defaultItem]="defaultNoticeType"
                                        (valueChange)="gridSettings.onFilter(column)"
                                        class="form-control">
                                    </kendo-dropdownlist>
                                    <span *ngIf="column.filter" (click)="resetBooleanFilter(column)" style="cursor:pointer;color:#656565;pointer-events:all;margin-right: 15px;" class="fa fa-times form-control-feedback" aria-hidden="true"></span>
                                </div>




                            </div>
                        </ng-template>

                        <ng-template kendoGridCellTemplate *ngIf="column.property === 'typeId'" let-dataItem>
                            {{noticesTypeDescriptions[dataItem.typeId]}}
                        </ng-template>

                        <ng-template kendoGridCellTemplate *ngIf="column.type === 'boolean'" let-dataItem>
                            <div>{{((dataItem[column.property] === true)? 'Yes': 'No')}}</div>
                        </ng-template>

                    </kendo-grid-column>
                </kendo-grid>
            </div>
            <!-- /.box-body -->
        </div>
    </section>
</div>